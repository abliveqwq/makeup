

# 化妆助手App说明书

前端：uniapp,用uview2组件

后端接口：node.js

数据库：MySQL8.0

数据库可视化软件：navicat

手机运行:内网部署（可有可无）

## 数据库

**账号：root**

**密码：123456**

### 数据表

#### **m_user**用户表：

​	数据结构:

| **id**             | int AI PK    |
| ------------------ | ------------ |
| username（用户名） | varchar(455) |
| password（密码）   | varchar(455) |
| nickname(昵称)     | varchar(455) |
| phone(号码)        | varchar(455) |
| sex(性别)          | varchar(455) |
| avatar(头像)       | text         |
| profile(简介)      | varchar(455) |

#### **m_like**喜欢表

​	数据结构：

| **id**          | int AI PK |
| --------------- | --------- |
| likeid(喜欢id)  | int       |
| user_id(用户id) | int       |

#### **m_hzptype**化妆品分类表：

​	数据结构：

| **id**         | int AI PK    |
| -------------- | ------------ |
| typeid(分类id) | int          |
| name(分类名称) | varchar(455) |

#### **m_list**教程列表：

​	数据结构：

| **id**         | int AI PK    |
| -------------- | ------------ |
| typeid(分类id) | int          |
| type(分类名称) | varchar(455) |
| images(图片)   | text         |
| name(教程名称) | varchar(455) |
| line(介绍)     | varchar(455) |

#### **m_address**地址表：

​	数据结构：

| **id**                     | int AI PK    |
| -------------------------- | ------------ |
| user_id(用户id)            | int          |
| recipient_name(收货人名称) | varchar(455) |
| phone_number(收货人电话)   | varchar(455) |
| address(地址)              | varchar(455) |

#### ****m_coll****：收藏列表

​	数据结构：

| **id**            | int AI PK(自增长) |
| ----------------- | ----------------- |
| collid（收藏id）  | int               |
| user_id（用户id） | int               |

#### ****m_image****：轮播图

​	数据结构：

| **id**      | int PK |
| ----------- | ------ |
| image(图片) | text   |

#### **m_comment**评论表：

​	数据结构：

| **id**          | int AI PK    |
| --------------- | ------------ |
| commid评论id    | int          |
| username用户名  | varchar(455) |
| avatar用户头像  | text         |
| comment评论内容 | varchar(455) |
| time发布时间    | varchar(455) |

#### **m_detail**详情表

​	数据结构：

| **id**       | int AI PK    |
| ------------ | ------------ |
| typeid分类id | varchar(455) |
| type分类名称 | varchar(455) |
| images轮播图 | text         |
| name教程名称 | varchar(455) |
| line介绍     | varchar(455) |

#### **m_hzplist**化妆品列表

​	数据结构：

| **d**          | int AI PK    |
| -------------- | ------------ |
| typeid分类id   | int          |
| type分类名称   | varchar(455) |
| images图片     | text         |
| name化妆品名称 | varchar(455) |
| price价格      | varchar(455) |
| Plant销量      | varchar(455) |

#### **m_shoppping**购物车表：

​	数据结构：

| **id**           | int AI PK |
| ---------------- | --------- |
| shopid购物车id， | int       |
| user_id用户id    | int       |

#### **m_type**分类表

​	数据结构：

| **id**       | int AI PK    |
| ------------ | ------------ |
| typeid分类id | int          |
| icon分类图片 | text         |
| type分类名称 | varchar(455) |

## 后端（Node.js）接口

### 文件格式：

1. API（接口项目文件）

   1. image(存入图片文件)

   2. mysql（连接数据库）

      1. ​	mysql.js页面

      2. ```js
         const mysql = require('mysql2');
         // 引入'mysql2' 模块，它是用于在 Node.js 环境中连接和操作 MySQL 数据库的常用库，通过'require' 函数将其引入当前代码文件，后续可以使用它提供的功能来创建数据库连接等操作。
         
         const db = mysql.createConnection({
             // 使用'mysql2' 模块提供的 'createConnection' 方法创建一个数据库连接对象，传入一个配置对象作为参数，用于指定连接数据库所需的各项参数信息。
             host: '127.0.0.1',
             // 设置要连接的 MySQL 数据库服务器的主机地址，这里 '127.0.0.1' 表示本地主机，也就是当前运行代码的这台机器。
             user: 'root',
             // 指定用于连接数据库的用户名，'root' 通常是 MySQL 数据库默认的超级管理员用户名（实际应用中应根据具体配置和安全需求来设置合适的用户名）。
             password: '123456',
             // 对应的是连接数据库时使用的密码，这里设置为 '123456'（实际应用中需设置为真实且安全的密码）。
             database: 'makeup'
             // 明确要连接的具体数据库名称，这里指定连接名为'makeup' 的数据库，该数据库中应该包含了与业务相关的各种数据表等结构。
         })
         
         // 向外共享出 db 数据库连接对象
         module.exports = db;
         // 通过 Node.js 的模块导出机制，将创建好的数据库连接对象 'db' 导出，使得其他模块可以引入这个对象，进而使用该对象来执行数据库查询、插入、更新等各种操作，实现与数据库的交互。
         ```

   3. node_modules依赖包

   4. router（路由）

      1. Make.js(所有接口)
      2. user.js（用户接口）
      3. userinfo.js（修改用户信息接口）

   5. router_handler（**`路由处理函数`**）

      1. Make.js(所有接口)
      2. user.js（用户接口）
      3. userinfo.js（修改用户信息接口）

   6. app.js（主函数入口）

   7. package-lock

   8. package.json

2. **启动项目：node app.js**

### 代码解释：

#### router中的js文件（路由）

##### make.js（所有接口）

```js
const express = require('express');
// 通过Node.js的require函数引入Express框架，Express常用于构建Web应用程序，后续可以基于它来进行路由定义、请求处理等一系列操作。

// 创建用户模块
const router = express.Router();
// 使用Express框架提供的Router方法创建一个路由实例，该实例专门用于定义当前模块（比如可能是某个具体业务模块）下的路由规则，方便对不同的请求路径进行针对性处理。

// 导入make模块
const make = require('../router_handler/make');
// 通过require函数引入相对路径（../router_handler/make）下的make模块，这里假设make模块中定义了诸多与业务相关的函数，用于处理诸如获取数据、发布内容、操作各类列表等具体业务逻辑。

const multer = require('multer');
// 引入multer模块，multer是用于处理文件上传的中间件，在Node.js环境下，常用于应对Web应用中表单上传文件的情况，比如这里可能用于上传图片等操作。

// 公共轮播图
router.get('/swiper', make.getswpier);
// 使用前面创建的路由实例定义一个GET请求的路由，路径为'/swiper'，当服务器接收到针对此路径的GET请求时，会调用make模块中定义的getswpier函数来获取公共轮播图相关的数据进行响应。

// 分类
router.get('/type', make.gettype);
// 定义一个GET请求的路由，路径为'/type'，当收到该路径的GET请求时，会调用make模块中的gettype函数来获取分类相关的数据，比如可能是商品分类、内容分类等具体分类信息。

// 查询列表
router.get('/list', make.getlist);
// 定义一个GET请求的路由，路径为'/list'，当接收到此路径的GET请求时，会调用make模块中的getlist函数来查询对应的列表数据，例如商品列表、文章列表等。

// 查询详情
router.get('/detail', make.getdetail);
// 定义一个GET请求的路由，路径为'/detail'，当有针对该路径的GET请求时，会调用make模块中的getdetail函数，用于获取详细的信息，比如商品详情、内容详情等。

// 查询喜欢列表
router.get('/like', make.getLike);
// 定义一个GET请求的路由，路径为'/like'，接收到该路径的GET请求时，会调用make模块中的getLike函数来获取用户喜欢的列表数据，比如喜欢的商品列表、喜欢的文章列表等。

// 发送喜欢列表
router.post('/like', make.saveLike);
// 定义一个POST请求的路由，路径为'/like'，当接收到这个路径的POST请求时，会调用make模块中的saveLike函数，用于将用户喜欢的相关信息进行保存，例如添加喜欢的商品、文章等操作。

// 取消喜欢
router.get('/dellike/:id', make.Dellike);
// 定义一个GET请求的路由，路径格式为'/dellike/:id'（这里的':id'是路由参数，用于指定具体要取消喜欢的某个项目的唯一标识），当接收到符合此格式的GET请求时，会调用make模块中的Dellike函数来执行取消喜欢的操作，比如取消喜欢某个商品、文章等。

// 查询收藏列表
router.get('/coll', make.getcoll);
// 定义一个GET请求的路由，路径为'/coll'，接收到此路径的GET请求时，会调用make模块中的getcoll函数来获取用户收藏的列表数据，例如收藏的商品列表、收藏的文章列表等。

// 发送收藏
router.post('/coll', make.savecoll);
// 定义一个POST请求的路由，路径为'/coll'，当接收到这个路径的POST请求时，会调用make模块中的savecoll函数，用于将用户想要收藏的相关内容进行保存，比如添加收藏商品、收藏文章等操作。

// 取消收藏
router.get('/delcoll/:id', make.Delcoll);
// 定义一个GET请求的路由，路径格式为'/delcoll/:id'（':id'为路由参数，用于指定具体要取消收藏的项目的标识），当接收到符合此格式的GET请求时，会调用make模块中的Delcoll函数来执行取消收藏的操作，例如取消收藏某个商品、文章等。

// 查询评论
router.get('/comment', make.getComment);
// 定义一个GET请求的路由，路径为'/comment'，当接收到此路径的GET请求时，会调用make模块中的getComment函数来获取相关的评论数据，比如获取某商品、某文章下的评论内容。

// 发布评论
router.post('/comment', make.setComment);
// 定义一个POST请求的路由，路径为'/comment'，当接收到这个路径的POST请求时，会调用make模块中的setComment函数，用于发布新的评论内容，比如用户对商品、文章发表自己的评论。

// 发布列表
router.post('/publish', make.publish);
// 定义一个POST请求的路由，路径为'/publish'，当接收到该路径的POST请求时，会调用make模块中的publish函数，用于发布相关的列表内容，例如发布商品列表、发布文章列表等（具体要看业务逻辑中的定义）。

// 上传图片
router.post("/update/image", multer({ dest: 'image/pubilsh' }).single('file'), make.updataImage);
// 定义一个POST请求的路由，路径为'/update/image'，这里配置了multer中间件来处理文件上传，它会将上传的文件存储到指定的'image/pubilsh'目录下，且每次只处理单个名为'file'的文件上传情况，文件上传完成后，会调用make模块中的updataImage函数来处理后续关于图片的业务逻辑，比如可能是将图片关联到对应的内容上等操作。

// 查询化妆品分类
router.get('/hzptype', make.gethzptype)
// 定义一个GET请求的路由，路径为'/hzptype'，当接收到此路径的GET请求时，会调用make模块中的gethzptype函数来获取化妆品分类相关的数据，例如化妆品按功效、按品牌等分类信息。

// 查询化妆品列表
router.get('/hzplist', make.gethzplist)
// 定义一个GET请求的路由，路径为'/hzplist'，当接收到此路径的GET请求时，会调用make模块中的gethzplist函数来获取化妆品的列表数据，比如展示多个化妆品的基本信息等。

// 查询化妆品
router.get('/shop', make.getshop)
// 定义一个GET请求的路由，路径为'/shop'，当接收到此路径的GET请求时，会调用make模块中的getshop函数来查询化妆品相关的信息，可能是获取某个具体化妆品的详情等情况。

// 加入购物车
router.post('/shop', make.postshop)
// 定义一个POST请求的路由，路径为'/shop'，当接收到这个路径的POST请求时，会调用make模块中的postshop函数来执行将化妆品加入购物车的操作，比如添加商品到购物车并记录相关数量、规格等信息。

// 删除购物车
router.get('/delshop/:shopid', make.delshop)
// 定义一个GET请求的路由，路径格式为'/delshop/:shopid'（':shopid'是路由参数，用于指定要删除的购物车中具体商品的唯一标识），当接收到符合此格式的GET请求时，会调用make模块中的delshop函数来执行从购物车中删除对应商品的操作。

// 清空购物车
router.get('/delallshop', make.delallshop)
// 定义一个GET请求的路由，路径为'/delallshop'，当接收到此路径的GET请求时，会调用make模块中的delallshop函数来执行清空整个购物车的操作，将购物车中的所有商品全部删除。

// 查询地址
router.get('/address', make.getaddress)
// 定义一个GET请求的路由，路径为'/address'，当接收到此路径的GET请求时，会调用make模块中的getaddress函数来获取用户的地址相关信息，比如收货地址等。

// 添加地址
router.post('/address', make.putaddress)
// 定义一个POST请求的路由，路径为'/address'，当接收到这个路径的POST请求时，会调用make模块中的putaddress函数来执行添加用户地址的操作，例如新增一个收货地址等。

// 将路由对象共享出去
module.exports = router;
// 将定义好的这个包含了众多业务相关路由规则（涉及轮播图、分类、各种列表操作、评论、购物车、地址等多方面业务）的路由对象导出，以便在其他模块中可以引入并使用这些路由配置，从而搭建起完整的Web应用的路由体系。
```

##### user.js（用户接口）

```js
const express = require('express');
// 引入Express框架，这是Node.js中用于构建Web应用程序的常用框架，通过require函数加载它

// 创建用户模块
const router = express.Router();
// 使用Express框架提供的Router方法创建一个路由实例，用于定义特定模块（这里是用户相关模块）下的路由规则

// 导入user_handler
const user = require('../router_handler/user');
// 通过require函数引入相对路径（../router_handler/user）下的user模块，这里假设user模块中定义了处理用户相关业务逻辑的函数等内容

// 登录
router.post('/login', user.login);
// 通过路由实例定义一个POST请求的路由，路径为'/login'，当接收到这个路径的POST请求时，会调用user模块中定义的login函数来处理请求

// 注册
router.post('/reguser', user.reguser);
// 同样通过路由实例定义一个POST请求的路由，路径为'/reguser'，当接收到这个路径的POST请求时，会调用user模块中定义的reguser函数来处理请求

// 将路由对象共享出去
module.exports = router;
// 将定义好的路由对象（包含了用户模块相关的登录、注册等路由规则）导出，以便在其他模块中可以引入并使用这个路由配置
```

##### userinfo.js（修改用户信息接口）

```js
// 导入 express
const express = require("express"); 
// 通过Node.js的require函数引入Express框架，Express是用于构建Web应用程序的常用框架，后续可以基于它来创建服务器、定义路由等操作。

// 创建路由对象
const router = express.Router();
// 使用Express框架提供的Router方法创建一个路由实例，该实例可以用来定义具体的路由规则，以便处理不同URL路径对应的请求。

const multer = require('multer');
// 引入multer模块，multer是一个用于处理在Node.js中上传文件的中间件，常用于处理表单中的文件上传操作，比如这里可能用于处理用户头像等文件上传的情况。

// 导入用户信息的处理函数
const userinfo = require('../router_handler/userinfo')
// 通过require函数引入相对路径（../router_handler/userinfo）下的userinfo模块，这个模块中应该定义了与用户信息相关的各种业务逻辑处理函数，比如获取用户信息、更新用户信息等具体操作对应的函数。

// 获取用户信息
router.get('/userinfo', userinfo.getUser)
// 使用之前创建的路由实例，定义一个GET请求的路由，路径为'/userinfo'，当服务器接收到这个路径的GET请求时，会调用userinfo模块中定义的getUser函数来处理该请求，从而获取用户信息。

// 更新用户的基本信息
router.post("/userinfo", userinfo.updateUserInfo);
// 同样利用路由实例定义一个POST请求的路由，路径也是'/userinfo'，不过这里是用于接收POST请求，当接收到该路径的POST请求时，会调用userinfo模块中的updateUserInfo函数来处理请求，以实现更新用户基本信息的功能。

// 重置密码的路由
router.post("/updatepwd", userinfo.changePassword);
// 通过路由实例定义一个POST请求的路由，路径为'/updatepwd'，当有针对此路径的POST请求到来时，会调用userinfo模块中定义的changePassword函数来处理请求，进而实现重置用户密码的操作。

// 更新用户头像
router.post("/update/avatar", multer({ dest: 'image' }).single('file'), userinfo.updateAvatar);
// 利用路由实例定义一个POST请求的路由，路径为'/update/avatar'，这里配置了multer中间件来处理文件上传，它会将上传的文件存储到指定的'dest'（这里是'image'目录下），且限制每次只处理单个名为'file'的文件上传情况，当请求符合要求且文件上传完成后，会调用userinfo模块中的updateAvatar函数来处理后续关于更新用户头像的业务逻辑。

// 向外共享路由对象
module.exports = router;
// 将定义好的包含了各种用户信息相关路由规则（获取用户信息、更新信息、重置密码、更新头像等）的路由对象导出，方便在其他模块中引入并使用这些路由配置来搭建整个Web应用的路由体系。
```

#### router-handle中的js文件（路由处理函数）

##### make.js（函数处理）

```js
// 引入所需的模块
const db = require("../mysql/mysql"); // 引入数据库连接模块
const fs = require('fs'); // 引入文件系统模块
const path = require('path'); // 引入路径模块
// 首页轮播图接口
exports.getswiper = (req, res) => {
    const id = req.params.id; // 从请求参数中获取id（虽然在SQL中没有使用到它）
    const sql = "SELECT * FROM kv_images"; // SQL查询获取所有轮播图
    db.query(sql, [id], (err, result) => { // 执行SQL查询
        if (err) { // 如果发生错误
            return res.status(500).send({ status: 1, message: '数据库错误' }); // 返回500状态和错误信息
        }
        return res.send({ status: 200, data: result }); // 返回200状态和结果数据
    });
};
// 查询分类接口
exports.Fenlei = (req, res) => {
    const id = req.params.id; // 从请求参数中获取id
    const sql = "SELECT * FROM kv_icon"; // SQL查询获取所有分类
    db.query(sql, [id], (err, result) => { // 执行SQL查询
        if (err) { // 如果发生错误
            return res.status(500).send({ status: 1, message: '数据库错误' }); // 返回500状态和错误信息
        }
        return res.send({ status: 200, data: result }); // 返回200状态和结果数据
    });
};
// 查询列表接口
exports.Liebiao = (req, res) => {
    const id = req.params.id; // 从请求参数中获取id
    const sql = "SELECT * FROM kv_list"; // SQL查询获取所有列表
    db.query(sql, [id], (err, result) => { // 执行SQL查询
        if (err) { // 如果发生错误
            return res.status(500).send({ status: 1, message: '数据库错误' }); // 返回500状态和错误信息
        }
        return res.send({ status: 200, data: result }); // 返回200状态和结果数据
    });
};
// 查询详情接口
exports.detail = (req, res) => {
    const id = req.params.id; // 从请求参数中获取id
    const sql = "SELECT * FROM kv_detail"; // SQL查询获取所有详情
    db.query(sql, [id], (err, result) => { // 执行SQL查询
        if (err) { // 如果发生错误
            return res.status(500).send({ status: 1, message: '数据库错误' }); // 返回500状态和错误信息
        }
        return res.send({ status: 200, data: result }); // 返回200状态和结果数据
    });
};
// 查询喜欢列表信息接口
exports.getLike = (req, res) => {
    const id = req.user.id; // 从用户信息中获取用户id
    const sql = "SELECT * FROM kv_list l JOIN kv_like c ON l.id=c.likeid WHERE user_id=?"; // SQL查询获取用户的喜欢列表
    db.query(sql, id, (err, result) => { // 执行SQL查询
        if (err) { // 如果发生错误
            return res.cc(err, 500); // 返回错误信息
        } else {
            return res.send({ status: 200, data: result }); // 返回200状态和结果数据
        }
    });
}
// 喜欢信息保存接口
exports.saveLike = (req, res) => {
    const id = req.user.id; // 从用户信息中获取用户id
    const like = req.body; // 获取请求体中的数据
    console.log(req.body); // 输出请求体内容到控制台
    const sql = "INSERT INTO kv_like(likeid, user_id) VALUES (?, ?)"; // SQL插入喜欢信息
    db.query(sql, [like.like, id], (err, result) => { // 执行SQL插入
        if (err) { // 如果发生错误
            return res.status(500).send({ status: 1, message: '数据库错误' }); // 返回500状态和错误信息
        } else {
            return res.send({ status: 200, data: result }); // 返回200状态和插入结果
        }
    });
}
// 取消喜欢接口
exports.Dellike = (req, res) => {
    const userId = req.user.id; // 从用户信息中获取用户id
    const likeId = req.params.id; // 从请求参数中获取喜欢的id
    console.log(likeId); // 输出喜欢的id到控制台
    console.log(userId); // 输出用户id到控制台
    const sql = "DELETE FROM kv_like WHERE user_id=? AND likeid=?"; // SQL删除喜欢信息
    db.query(sql, [userId, likeId], (err, result) => { // 执行SQL删除
        if (err) { // 如果发生错误
            return res.status(500).send({ status: 1, message: '数据库错误' }); // 返回500状态和错误信息
        } else {
            return res.send({ status: 200, data: result }); // 返回200状态和删除结果
        }
    });
}
// 查询收藏信息接口
exports.getcoll = (req, res) => {
    const id = req.user.id; // 从用户信息中获取用户id
    const sql = "SELECT * FROM kv_list l JOIN kv_coll c ON l.id=c.collid WHERE user_id=?"; // SQL查询获取用户的收藏信息
    db.query(sql, id, (err, result) => { // 执行SQL查询
        if (err) { // 如果发生错误
            return res.cc(err, 500); // 返回错误信息
        } else {
            return res.send({ status: 200, data: result }); // 返回200状态和结果数据
        }
    });
}
// 发送收藏信息接口
exports.savecoll = (req, res) => {
    const id = req.user.id; // 从用户信息中获取用户id
    const coll = req.body; // 获取请求体中的数据
    console.log(req.body); // 输出请求体内容到控制台
    const sql = "INSERT INTO kv_coll(collid, user_id) VALUES (?, ?)"; // SQL插入收藏信息
    db.query(sql, [coll.coll, id], (err, result) => { // 执行SQL插入
        if (err) { // 如果发生错误
            return res.status(500).send({ status: 1, message: '数据库错误' }); // 返回500状态和错误信息
        } else {
            return res.send({ status: 200, data: result }); // 返回200状态和插入结果
        }
    });
}
// 取消收藏接口
exports.Delcoll = (req, res) => {
    const userId = req.user.id; // 从用户信息中获取用户id
    const collId = req.params.id; // 从请求参数中获取收藏的id
    console.log(collId); // 输出收藏的id到控制台
    console.log(userId); // 输出用户id到控制台
    const sql = "DELETE FROM kv_coll WHERE user_id=? AND collid=?"; // SQL删除收藏信息
    db.query(sql, [userId, collId], (err, result) => { // 执行SQL删除
        if (err) { // 如果发生错误
            return res.status(500).send({ status: 1, message: '数据库错误' }); // 返回500状态和错误信息
        } else {
            return res.send({ status: 200, data: result }); // 返回200状态和删除结果
        }
    });
}
// 查询发布美食接口
exports.getpubilsh = (req, res) => {
    const id = req.user.id; // 从用户信息中获取用户id
    const sql = "SELECT * FROM kv_list l JOIN kv_publish c ON l.id=c.typeid WHERE user_id=?"; // SQL查询获取用户发布的美食信息
    db.query(sql, id, (err, result) => { // 执行SQL查询
        if (err) { // 如果发生错误
            return res.cc(err, 500); // 返回错误信息
        } else {
            return res.send({ status: 200, data: result }); // 返回200状态和结果数据
        }
    });
}
// 发布美食教程接口 (Publish food tutorial interface)
exports.publish = async (req, res) => {
    // 获取当前用户的ID
    const id = req.user.id;
    // 从请求体中提取相关字段
    const { typeid, type, name, Briefly, text1, text2, text3, text4, text5, image1, image2, image3, image4, image5 } = req.body;
    // SQL 查询语句，插入数据到 kv_publish 表
    const sql = `
        INSERT INTO kv_publish (typeid, type, name, Briefly, text1, text2, text3, text4, text5, image1, image2, image3, image4, image5, user_id)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`;
    // SQL 查询语句，插入数据到 kv_list 表
    const sql2 = `
        INSERT INTO kv_list (typeid, type, name, Briefly, image)
        VALUES (?, ?, ?, ?, ?)`;
    // SQL 查询语句，插入数据到 kv_detail 表
    const sql3 = `
        INSERT INTO kv_detail (typeid, type, name, Briefly, text1, text2, text3, text4, text5, image1, image2, image3, image4, image5)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`;
    try {
        // 执行插入 kv_publish 表的查询
        const results = await db.query(sql, [typeid, type, name, Briefly, text1, text2, text3, text4, text5, image1, image2, image3, image4, image5, id]);  
        // 执行插入 kv_list 表的查询
        const results2 = await db.query(sql2, [typeid, type, name, Briefly, image1]);      
        // 执行插入 kv_detail 表的查询
        const results3 = await db.query(sql3, [typeid, type, name, Briefly, text1, text2, text3, text4, text5, image1, image2, image3, image4, image5]);
        // 返回成功的响应，包括插入的结果
        return res.send({
            status: 200,
            data: {
                result1: results[0],
                result2: results2[0],
                result3: results3[0]
            }
        });
    } catch (error) {
        // 捕获任何错误并输出到控制台
        console.error(error);
        // 返回500状态和错误信息
        return res.status(500).send(error);
    }
};
// 上传图片 (Upload images)
exports.updataImage = async (req, res) => {
    // 获取上传文件的扩展名
    var appendName = req.file.originalname.split('.')[1];
    // 创建新的文件名
    const newFileName = `${req.file.filename}.${appendName}`;
    // 创建新的文件路径
    const newPath = path.join(__dirname, `../image/pubilsh/${newFileName}`);
    // 确保目标文件夹存在
    fs.mkdirSync(path.dirname(newPath), { recursive: true });
    // 重命名文件：将上传文件移动到新路径
    fs.rename(req.file.path, newPath, function (err) {
        if (err) throw err; // 处理错误
        // 定义要复制到的文件夹
        const folders = ['../image/pubilsh', '../image/list', '../image/detail']; // 修改路径
        // 遍历文件夹数组，确保每个目标文件夹存在
        folders.forEach(folder => {
            const folderPath = path.join(__dirname, folder);
            // 确保每个目标文件夹存在
            fs.mkdirSync(folderPath, { recursive: true });
            // 定义目标路径
            const destPath = path.join(folderPath, newFileName);
            // 复制文件到每个目标路径
            fs.copyFile(newPath, destPath, (err) => {
                if (err) throw err; // 处理错误
            });
        });
    });
    // 返回成功的响应，包括新文件名
    res.send({ status: 200, data: newFileName });
};

```

##### user.js（函数处理）

```js
const db = require('../mysql/mysql');
// 引入自定义的数据库操作模块（这里假设 '../mysql/mysql' 这个路径下的模块封装了与 MySQL 数据库交互的相关函数等内容），用于后续执行数据库查询、插入等操作。

const bcrypt = require('bcryptjs');
// 引入 'bcryptjs' 库，它主要用于对密码等敏感信息进行哈希加密处理，以增加数据的安全性，比如将用户输入的明文密码加密后再存储到数据库中。

const jwt = require('jsonwebtoken');
// 引入 'jsonwebtoken' 库，用于生成和验证 JSON Web Tokens（JWT），通常在用户认证成功后生成一个令牌，以便后续的请求可以凭借该令牌来验证用户身份等操作。

// 登录接口
exports.login = (req, res) => {
    // 定义一个名为 'login' 的函数，并将其通过 'exports' 导出，使其可以在其他模块中被访问，这个函数用于处理用户登录的逻辑，接收 Express 框架传入的请求对象（req）和响应对象（res）作为参数。
    const { username, password } = req.body;
    // 从请求对象（req）的 body 属性中解构出 'username' 和 'password' 字段，这两个字段应该是用户在登录表单中输入的用户名和密码信息。
    console.log(username, password);
    // 在控制台打印出接收到的用户名和密码，方便调试查看传入的数据是否正确。
    const sql = 'SELECT * FROM m_user WHERE username =?';
    // 定义一个 SQL 查询语句，目的是从名为'm_user' 的数据库表中查询出用户名与传入的 'username' 匹配的记录，'?' 是占位符，后续会传入实际的用户名值。
    db.query(sql, [username], (err, results) => {
        // 使用之前引入的数据库操作模块（db）的 'query' 方法执行上面定义的 SQL 查询语句，传入查询语句（sql）和对应的参数（[username]，即实际的用户名值），同时传入一个回调函数，这个回调函数会在查询操作完成后被调用，它接收两个参数：'err' 表示查询过程中出现的错误信息（如果有的话），'results' 表示查询得到的结果集（是一个包含查询到记录的数组）。
        console.log(username)
        // 再次在控制台打印用户名，可能是为了进一步确认在数据库查询过程中用户名的情况，用于调试目的。
        if (err) {
            // 如果查询过程中出现错误（err 不为 null），则执行以下逻辑。
            return res.cc(err, 500)
            // 通过调用响应对象（res）的 'cc' 方法（这里假设 'cc' 是自定义的一个用于统一处理错误响应的函数），将错误信息（err）以及状态码 500（表示服务器内部错误）返回给客户端，告知客户端登录操作出现问题。
        }
        if (results.length!== 1) {
            // 如果查询结果集的长度不等于 1，也就是没有找到匹配的用户记录或者找到多条匹配记录（正常应该只找到一条对应用户名的记录），则执行以下逻辑。
            console.log(results.length)
            // 在控制台打印出结果集的长度，方便查看具体情况，用于调试目的。
            return res.send({ status: 1, message: '登录失败' });
            // 通过响应对象（res）向客户端发送一个包含'status' 和'message' 属性的 JSON 对象，'status' 为 1 表示出现错误（这里可以根据具体的业务逻辑定义状态码的含义），'message' 告知客户端登录失败的提示信息。
        }
        const compareResult = bcrypt.compareSync(password, results[0].password);
        // 使用 'bcrypt' 库的 'compareSync' 方法对比用户输入的密码（password）和从数据库查询结果中获取的已加密密码（results[0].password，results[0] 表示结果集中的第一条记录，也就是匹配用户名的那条记录），该方法返回一个布尔值，表示密码是否匹配，将结果赋值给 'compareResult' 变量。
        if (!compareResult) {
            // 如果密码对比结果为不匹配（compareResult 为 false），则执行以下逻辑。
            return res.send({ status: 1, message: '密码输入错误' });
            // 通过响应对象（res）向客户端发送一个包含'status' 和'message' 属性的 JSON 对象，告知客户端密码输入错误导致登录失败。
        }
        const user = {...results[0], password: "", user_pic: "" };
        // 通过解构赋值的方式创建一个新的对象 'user'，它基于数据库查询结果中的第一条记录（results[0]），但将其中的 'password' 和 'user_pic' 字段的值设置为空字符串，可能是为了避免将敏感信息（密码）以及不必要的字段（user_pic，根据具体业务情况而定）返回给客户端。
        console.log(user)
        // 在控制台打印出处理后的 'user' 对象，方便查看具体的用户信息情况，用于调试目的。
        const token = jwt.sign({ id: user.id, username: user.username }, 'your_jwt_secret', { expiresIn: '24h' });
        // 使用 'jsonwebtoken' 库的'sign' 方法生成一个 JSON Web Token（JWT），传入一个包含用户 ID（user.id）和用户名（user.username）的对象作为 payload（负载信息），第二个参数 'your_jwt_secret' 是用于签名的密钥（在实际应用中应该妥善保管这个密钥，这里只是示例写法），第三个参数是一个配置对象，设置令牌的有效期为 '24h'（24 小时），生成的令牌赋值给 'token' 变量。
        console.log(token)
        // 在控制台打印出生成的令牌，方便查看令牌的具体内容，用于调试目的。
        res.json({ message: '登录成功', token });
        // 通过响应对象（res）向客户端发送一个包含'message' 和 'token' 属性的 JSON 对象，告知客户端登录成功，并将生成的令牌一起返回给客户端，客户端后续可以使用这个令牌进行身份验证等操作。
    });
}

// 注册接口
exports.reguser = (req, res) => {
    // 定义一个名为'reguser' 的函数，并通过 'exports' 导出，用于处理用户注册的逻辑，同样接收请求对象（req）和响应对象（res）作为参数。
    const { username, password } = req.body;
    // 从请求对象（req）的 body 属性中解构出 'username' 和 'password' 字段，这两个字段是用户在注册表单中输入的用户名和密码信息。
    if (!username ||!password) {
        // 如果用户名或者密码为空（也就是用户没有输入完整的注册信息），则执行以下逻辑。
        return res.status(400).json({ message: '用户名和密码不能为空' });
        // 通过响应对象（res）向客户端返回一个包含'message' 属性的 JSON 对象，并设置状态码为 400（表示客户端请求错误），告知客户端用户名和密码不能为空。
    }

    try {
        // 使用 try-catch 语句块来捕获可能出现的异常，以下代码如果出现异常会被 catch 块捕获并进行相应处理。
        // 查询用户名是否存在
        const checkSql = "SELECT * FROM m_user WHERE username =?";
        // 定义一个 SQL 查询语句，用于从名为'm_user' 的数据库表中查询是否已经存在与传入的 'username' 相同的记录，也就是检查用户名是否已被使用。
        db.query(checkSql, [username], (err, results) => {
            // 使用数据库操作模块（db）的 'query' 方法执行上面的查询语句，传入查询语句（checkSql）和对应的参数（[username]），并传入回调函数，在查询完成后根据结果进行相应处理，回调函数接收 'err'（错误信息）和'results'（查询结果集）两个参数。
            if (err) {
                // 如果查询过程中出现错误（err 不为 null），则执行以下逻辑。
                console.log(err.message);
                // 在控制台打印出错误信息的详细内容，方便调试查看出现了什么问题。
                return res.status(500).json({ message: '服务器错误' });
                // 通过响应对象（res）向客户端返回一个包含'message' 属性的 JSON 对象，并设置状态码为 500（表示服务器内部错误），告知客户端服务器出现问题导致无法完成注册操作。
            }

            if (results.length > 0) {
                // 如果查询结果集的长度大于 0，说明已经存在相同用户名的记录，也就是用户名已被占用，则执行以下逻辑。
                return res.status(400).json({ message: '用户名已存在' });
                // 通过响应对象（res）向客户端返回一个包含'message' 属性的 JSON 对象，并设置状态码为 400（表示客户端请求错误），告知客户端所选用户名已经存在，不能用于注册。
            }

            // 加密密码
            const hashedPassword = bcrypt.hashSync(password, 10);
            // 使用 'bcrypt' 库的 'hashSync' 方法对用户输入的密码（password）进行哈希加密处理，第二个参数 '10' 表示加密的成本因子（可以理解为加密的强度，数值越大，加密越耗时但安全性越高），加密后的密码赋值给 'hashedPassword' 变量。
            const insertSql = "INSERT INTO m_user (username, password) VALUES (?,?)";
            // 定义一个 SQL 插入语句，用于将新用户的信息（用户名和加密后的密码）插入到名为'm_user' 的数据库表中，'?' 是占位符，后续会传入实际的值。
            // 插入用户到数据库
            db.query(insertSql, [username, hashedPassword], (err) => {
                // 使用数据库操作模块（db）的 'query' 方法执行插入语句，传入插入语句（insertSql）和对应的参数（[username, hashedPassword]），并传入回调函数，在插入操作完成后根据结果进行相应处理，回调函数只接收 'err'（错误信息）这一个参数，因为插入操作成功时一般不需要返回具体的结果集。
                if (err) {
                    // 如果插入过程中出现错误（err 不为 null），则执行以下逻辑。
                    console.log(err.message);
                    // 在控制台打印出错误信息的详细内容，方便调试查看出现了什么问题。
                    return res.status(500).json({ message: '注册用户失败' });
                    // 通过响应对象（res）向客户端返回一个包含'message' 属性的 JSON 对象，并设置状态码为 500（表示服务器内部错误），告知客户端由于服务器问题导致注册用户失败。
                }
                res.status(201).json({ message: '用户注册成功' });
                // 如果插入操作成功（err 为 null），则通过响应对象（res）向客户端返回一个包含'message' 属性的 JSON 对象，并设置状态码为 201（表示资源创建成功，符合用户注册成功创建新用户记录的场景），告知客户端用户注册成功。
            });
        });
    } catch (error) {
        // 如果在 try 块中的代码出现异常，会被这个 catch 块捕获，执行以下逻辑。
        res.status(500).json({ message: '服务器错误' });
        // 通过响应对象（res）向客户端返回一个包含'message' 属性的 JSON 对象，并设置状态码为 500（表示服务器内部错误），告知客户端由于服务器出现异常导致注册操作无法完成。
    }
};
```

**代码说明：**

- **模块导入**： 导入模块用于数据库操作，用于密码加密和比较，用于生成和验证JWT。`mysql``bcryptjs``jsonwebtoken`
- **注册用户**：
  - 接收用户名和密码，并进行基本的验证。
  - 使用加密密码后，将用户名和加密后的密码插入到数据库中。`bcrypt`
- **登录用户**：
  - 通过用户名查询用户信息，如果找到用户则比较输入的密码与存储的加密密码。
  - 登录成功后，生成一个JWT令牌并返回给客户端。

##### userinfo.js（函数处理）

```js
// 导入所需的模块
const db = require("../mysql/mysql"); // 导入数据库模块
const bcrypt = require('bcryptjs'); // 导入 bcrypt 用于密码哈希
const fs = require('fs'); // 导入文件系统模块
const path = require('path'); // 导入路径模块
// 获取用户信息的接口
exports.getUser = (req, res) => {
    // 从请求的查询参数中获取用户ID
    const Id = req.user.id; // 假设用户已经通过身份验证，ID存储在req.user对象中
    console.log(Id); // 打印用户ID，用于调试
// 编写 SQL 查询语句，查询用户信息
const sql = 'SELECT username, phone, avatar, nickname, sex FROM kv_user WHERE id = ?';
// 执行 SQL 查询
db.query(sql, [Id], (err, results) => {
    if (err) {
        // 如果数据库查询出错，返回500错误
        return res.status(500).send({ status: 1, message: '数据库错误' });
    }
    if (results.length !== 1) {
        // 如果未找到用户，返回404错误
        return res.status(404).send({ status: 1, message: '用户未找到' });
    }
    // 将用户信息从结果中提取出来
    const user = results[0]; // 获取查询结果中的第一个用户
    res.json({ message: '用户信息获取成功', user }); // 返回用户信息
});
};
// 修改用户信息的接口
exports.updateUserInfo = (req, res) => {
    // 从请求体中获取要更新的用户信息
    const { email, avatar, nickname, sex } = req.body; // 解构请求体中的字段
    const Id = req.user.id; // 获取用户ID
// 检查请求体中是否包含至少一个字段
if (!email && !avatar && !nickname && !sex) {
    // 如果没有提供任何更新字段，返回400错误
    return res.status(400).send({ status: 1, message: '至少提供一个字段进行更新' });
}
// 编写 SQL 更新语句
const sql = 'UPDATE kv_user SET phone = ?, avatar = ?, nickname = ?, sex = ? WHERE id = ?';
// 执行 SQL 更新操作
db.query(sql, [email, avatar, nickname, sex, Id], (err, results) => {
    if (err) {
        console.error("数据库更新失败:", err); // 打印错误信息
        return res.status(500).send({ status: 1, message: '数据库错误' });
    }
    // 检查更新是否成功
    if (results.affectedRows !== 1) {
        // 如果没有行受到影响，说明更新失败
        return res.status(404).send({ status: 1, message: '用户信息更新失败' });
    }
    // 返回成功信息
    res.send({ status: 0, message: '用户信息更新成功' });
});
};
// 更改密码接口
exports.changePassword = (req, res) => {
    const userId = req.user.id; // 获取用户ID（假设用户已通过身份验证）
    const { oldPassword, newPassword } = req.body; // 从请求体中获取旧密码和新密码
// 检查旧密码和新密码是否为空
if (!oldPassword || !newPassword) {
    return res.status(400).send({ status: 1, message: '旧密码和新密码不能为空' });
}
// 查询用户当前密码哈希
const sql = 'SELECT password FROM kv_user WHERE id = ?';
db.query(sql, [userId], async (err, results) => {
    if (err) {
        // 如果数据库查询出错，返回500错误
        return res.status(500).send({ status: 1, message: '数据库错误' });
    }
    if (results.length !== 1) {
        // 如果未找到用户，返回404错误
        return res.status(404).send({ status: 1, message: '用户未找到' });
    }   
    const hashedPassword = results[0].password; // 获取用户的哈希密码
​    // 验证旧密码
​    const match = await bcrypt.compare(oldPassword, hashedPassword); // 比较输入的旧密码与数据库中的哈希密码
​    if (!match) {
​        // 如果旧密码不匹配，返回401错误
​        return res.status(401).send({ status: 1, message: '旧密码不正确' });
​    }
​    // 检查新密码的有效性
​    if (newPassword.length < 6) {
​        // 如果新密码长度小于6，返回400错误
​        return res.status(400).send({ status: 1, message: '新密码长度不能少于6个字符' });
​    }
​    // 加密新密码
​    const newHashedPassword = await bcrypt.hash(newPassword, 10); // 使用bcrypt对新密码进行哈希
​    // 更新密码
​    const updateSql = 'UPDATE kv_user SET password = ? WHERE id = ?';
​    db.query(updateSql, [newHashedPassword, userId], (updateErr) => {
​        if (updateErr) {
​            // 如果更新密码时出错，返回500错误
​            return res.status(500).send({ status: 1, message: '更新密码失败' });
​        }
​        res.send({ message: '密码更改成功' }); // 返回成功信息
​        console.log(newHashedPassword); // 打印新哈希密码（可选）
​    });
});
};
// 更新用户头像的接口
exports.updateAvatar = async (req, res) => {
    // 从上传文件中获取文件扩展名
    var appendName = req.file.originalname.split('.')[1]; // 获取文件扩展名
    // fs重命名文件，第一个参数为上传文件绝对路径，第二个参数为相对路径
    // 第三个参数可选
    fs.rename(req.file.path, `image/${req.file.filename}.${appendName}`, function (err) {
        if (err) throw err; // 如果重命名出错，抛出错误
    });
    // 返回更新后的头像文件名
    res.send({ status: 200, data: req.file.filename + '.' + appendName });
};
```

**主要功能概述**

1. **获取用户信息**： 根据用户ID查询用户的基本信息。
2. **修改用户信息**: 更新用户的电子邮件、头像、昵称和性别。
3. **更改密码**： 验证旧密码并将新密码存储为哈希值。
4. **更新用户头像**: 处理用户上传的头像文件并重命名。

#### app.js主函数入口

```js
// 引入express模块
const express = require('express');
// 引入cors模块，允许跨域请求
const cors = require('cors');
// 创建Express应用实例
const app = express();
// 引入path模块，用于处理文件路径
const path = require('path');
// 引入express-jwt模块，用于JWT（JSON Web Token）身份验证
const expressJWT = require("express-jwt");
// 使用静态文件中间件，将 'image' 文件夹中的文件提供为静态文件
app.use(express.static('image'))
// 使用CORS中间件，允许跨域请求
app.use(cors());
// 使用JWT中间件，设置JWT的secret，并且对于/user/路径下的请求不进行验证
app.use(
    expressJWT({ secret: "your_jwt_secret" }).unless({ path: [/^\/user\//] })
);
// 解析JSON格式的请求体
app.use(express.json());
// 使用静态文件中间件，将 'public' 文件夹中的文件提供为静态文件
app.use(express.static(path.join(__dirname, 'public')));
// 简单封装的中间件，用于统一处理响应
app.use((req, res, next) => {
    // 封装响应函数
    res.cc = (err, status = 1) => {
        // 如果err是Error对象，返回错误信息，否则返回err
        res.send({ status, message: err instanceof Error ? err.message : err });
    }
    // 调用下一个中间件
    next()
});
// 导入用户路由模块
const userRouter = require('./router/user')
// 将用户路由挂载到 '/user' 路径
app.use("/user", userRouter)
// 导入用户信息路由模块
const userinfoRouter = require('./router/userinfo')
// 将用户信息路由挂载到 '/info' 路径
app.use("/info", userinfoRouter)
// 导入厨房教程信息路由模块
const kichenRouter = require('./router/kichen')
// 将厨房教程信息路由挂载到 '/api' 路径
app.use('/api', kichenRouter)
// 启动服务器，监听3008端口
app.listen(3008, () => {
    // 输出服务器地址到控制台
    console.log('http://127.0.0.1:3008');
});
```

**代码的整体结构和功能：**

1. **基础设置**：
   - 引入必要的模块（Express、CORS、path、JWT）并创建应用实例。
2. **中间件配置**：
   - 配置静态文件服务，允许跨域请求，并设置JWT中间件以保护特定的路由。
   - 通过封装的响应方法 （） 统一处理 API 的响应格式。`res.cc`
3. **路由挂载**：
   - 导入并挂载用户相关的路由模块，这些模块分别处理不同的请求路径。
4. **服务器启动**：
   - 启动 HTTP 服务器，监听特定端口并在控制台输出服务器地址。

这个代码的设计非常适合构建一个 RESTful API 服务，提供用户管理、用户信息获取及厨房教程信息等功能。



## 前端

### uniapp项目Makeup assistant

### 文件说明：

#### page的页面：（共17个页面）

1. **cell(收藏)**
2. **classify（更多分类）**
3. **detail（教程详情）**
4. **hos（喜欢）**
5. **index（首页）**
6. **login（登录）**
7. **newaddress（新增地址）**
8. **order（订单页）**
9. **password（修改密码）**
10. **publish（发布页面）**
11. **reguser（注册页面）**
12. **search（搜索页面）**
13. **Skincare（购物车页面）**
14. **tools(化妆品分类页面)**
15. **type（分类页面）**
16. ##### user（用户页面）
17. ##### userinfo（修改用户信息页面）

#### State页面（放图片文件）

#### mian.js函数入口

```js
//导入主应用程序组件。这是定义应用程序的主要结构的地方。
import App from './App'
//导入 uView UI 库，该库提供一组用于应用程序的 UI 组件。
import uView from "uview-ui";
//将 uView 库注册为插件，允许其组件和功能在整个 Vue 应用程序中使用。
Vue.use(uView);
//定义可在任何组件中访问的全局属性，以引用 API 请求的基 URL。这对于向后端发出 HTTP 请求
Vue.prototype.$url = 'http://127.0.0.1:3006'
// 创建带有标题的对象。使用 从本地存储中检索令牌。
const head = {
	Authorization: 'Bearer ' + uni.getStorageSync('token') // Retrieve token from local storage
}
//将对象分配给 Vue 原型，使其可以从应用程序中的任何组件访问
Vue.prototype.$head = head
// #ifndef VUE3
import Vue from 'vue' //导入 Vue。
import './uni.promisify.adaptor' //导入适配器以处理 promisified API。
Vue.config.productionTip = false //阻止 Vue 在控制台中显示生产提示。
App.mpType = 'app'
const app = new Vue({//创建一个新的 Vue 实例，将 App 组件的属性扩展到其中。
  ...App 
})
app.$mount()//将 Vue 实例挂载到 DOM 上。
// #endif
// #ifdef VUE3
import { createSSRApp } from 'vue'//导入函数以创建服务器端渲染的应用程序。
export function createApp() {//定义并导出一个函数来创建应用程序实例，该函数返回创建的应用程序。
  const app = createSSRApp(App) 
  return {
    app 
  }
}
// #endif
```

**//总结**
**此代码设置了一个 Vue 应用程序，该应用程序可以使用 uView UI 库，为 API 请求配置全局属性，并处理 Vue 2 和 Vue 3 设置。使用条件编译 （ 和 ） 可确保根据项目配置使用正确的框架版本。全局属性允许在整个应用程序中轻松访问基本 URL 和授权标头。#ifndef#ifdef**

#### pages.json页面

```js
"easycom": {//导入uview组件
			"^u-(.*)": "@/uview-ui/components/u-$1/u-$1.vue"
		},
"tabBar": {
    "color": "#949494",  // 未选中时图标的颜色
    "selectedColor": "#333",  // 选中时图标的颜色
    "list": [
        {
            "iconPath": "static/icon/首页.png",  // 未选中时首页图标的路径
            "selectedIconPath": "static/icon/首页 (1).png",  // 选中时首页图标的路径
            "pagePath": "pages/index/index",  // 首页对应的页面路径
            "text": "首页"  // Tab上显示的文字
        },
        {
            "iconPath": "static/化妆品.png",  // 未选中时化妆品推荐图标的路径
            "selectedIconPath": "static/化妆品 (1).png",  // 选中时化妆品推荐图标的路径
            "pagePath": "pages/tools/tools",  // 化妆品推荐对应的页面路径
            "text": "化妆品推荐"  // Tab上显示的文字
        },
        {
            "iconPath": "static/icon/发布色块.png",  // 未选中时发布图标的路径
            "selectedIconPath": "static/icon/发布色块 (1).png",  // 选中时发布图标的路径
            "pagePath": "pages/publish/publish",  // 发布页面对应的路径
            "text": "发布"  // Tab上显示的文字
        },
        {
            "iconPath": "static/护肤.png",  // 未选中时护肤图标的路径
            "selectedIconPath": "static/护肤 (1).png",  // 选中时护肤图标的路径
            "pagePath": "pages/Skincare/Skincare",  // 购物车页面对应的路径
            "text": "购物车"  // Tab上显示的文字
        },
        {
            "iconPath": "static/icon/我的.png",  // 未选中时我的图标的路径
            "selectedIconPath": "static/icon/我的 (1).png",  // 选中时我的图标的路径
            "pagePath": "pages/user/user",  // 我的页面对应的路径
            "text": "我的"  // Tab上显示的文字
        }
    ]
}
```

### 页面代码说明

#### cell收藏页面

##### html

```html
<template>
  <view>
    <!-- 遍历 list 数组，展示每个收藏项 -->
    <view @click="godetail(item)" style="margin: 30rpx;" class="u-body-item u-flex u-boder-bottom u-col-between u-p-t-0" v-for="item in list" :key="item.collid">
      <!-- 显示图片，图片地址由 item.images 动态绑定 -->
      <image :src="`http://127.0.0.1:3006/list/` + item.images" style="width: 280rpx; height: 280rpx; border-radius: 10rpx"></image>
      
      <view class="u-body-item-title u-line-2">
        <!-- 显示名称，字体加粗，字号为 50rpx -->
        <view class="u-body-item-title u-line-1" style="margin-left: 30rpx; font-weight: bold; font-size: 50rpx;">
          {{ item.name }}
        </view>
        
        <!-- 显示类型，字号为 28rpx，字体颜色为灰色 -->
        <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 28rpx; color: #afafaf">
          {{ item.type }}
        </view>
        
        <!-- 显示简短描述，字体和类型行一样 -->
        <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 28rpx; color: #afafaf">
          {{ item.Briefly }}
        </view>

        <!-- 取消收藏按钮，点击时调用 delcoll 方法，传入该项的 collid -->
        <u-button @click="delcoll(item.collid)" :plain="true" type="warning" style="margin-top: 20rpx; margin-right: 20rpx; width: 200rpx;">
          取消收藏
        </u-button>
      </view>
    </view>
  </view>
</template>
```

##### js

```js
<script>
export default {
  data() {
    return {
      list: []  // 存储收藏的列表
    };
  },
  
  // 页面加载时，调用 savecoll 方法查询收藏列表
  onLoad() {
    this.savecoll();
  },
  
  methods: {
    // 查询收藏列表的方法
    savecoll() {
      uni.request({
        url: this.$url + '/api/coll',  // 请求的 URL 地址
        method: 'GET',  // 请求方式为 GET
        header: this.$head,  // 请求头
        success: (res) => {  // 请求成功后的回调
          console.log(res);  // 打印响应数据
          this.list = res.data.data;  // 将响应数据赋值给 list
        }
      });
    },
    
    // 取消收藏的方法
    delcoll(collid) {
      uni.request({
        url: `${this.$url}/api/delcoll/${collid}`,  // 请求的 URL 地址，带上取消的 collid
        method: 'GET',  // 请求方式为 GET
        header: this.$head,  // 请求头
        success: (res) => {  // 请求成功后的回调
          console.log(res);  // 打印响应数据
          // 从 list 中移除该项
          this.list = this.list.filter(item => item.collid !== collid);

          // 显示取消成功的提示
          uni.showToast({
            title: '取消成功',
            icon: 'success'
          });
        }
      });
    },
    
    // 跳转到详情页的方法
    godetail(item) {
      // 使用 uni.navigateTo 跳转到详情页，并将当前项的 collid 传递过去
      uni.navigateTo({
        url: `/pages/detail/detail?id=${item.collid}`
      });
    }
  }
};
</script>


```

#### classilfy更多分类

##### html

```html
<template>
	<view class="box">
		<view class="content_main">
			<view class="option">
				<!-- 使用 v-for 循环渲染 icon 数组，展示每个分类 -->
				<view class="item" v-for="(item,index) in icon" @click="clickItem(item,index)"  :class="index == current ? 'name' : ''">
					<!-- 显示分类名称 -->
					{{item.type}}
				</view>
			</view>
			<view>
				<!-- 使用 v-for 循环渲染 list 数组，展示每个商品的详细信息 -->
				<view @click="godetail(item)"  v-for="item in list" class="u-body-item u-flex u-p-t-0" style="padding-left: 50rpx;">
					 <!-- 显示商品图片 -->
					 <image :src="`http://127.0.0.1:3006/list/`+item.images" mode="aspectFit"  ></image>
					<view class="u-body-item-title u-line-3">
						<!-- 显示商品名称 -->
						<view style="margin-left: 10rpx;font-weight: bold;font-size: 36rpx;" >
							{{item.name}}
						</view>
						<!-- 显示商品描述信息 -->
						<view style="font-size: 28rpx; color:#afafaf">
							{{item.line}}
						</view>
					</view>
				</view>
			</view>
		</view>
	</view>
</template>
```

##### js

```js
<script>
	export default {
		data() {
			return {
				// 当前选中的分类，默认为 '淡妆新手'
				name: '淡妆新手',
				pageNum: 1, // 当前页码，默认为1
				countStatus: false, // 状态标识
				current: 0, // 当前选中的分类索引
				// 定义分类项
				icon: [{ type: '全部' }, { type: '淡妆新手' }],
				list: [], // 存储商品列表
				typename: [] // 存储分类名称
			};
		},
		onLoad() {
			// 页面加载时调用两个方法
			this.geticon(); // 获取分类列表
			this.getlist(); // 获取商品列表
		},
		methods: {
			// 查询商品列表
			getlist() {
				uni.request({
					url: this.$url + '/api/list', // 请求的 API 地址
					method: 'GET', // GET 请求
					header: this.$head, // 请求头
					success: (res) => {
						if (res.data.data) {
							// 如果有返回数据，进行过滤
							this.list = this.name 
								? res.data.data.filter(item => {
								
								let image = item.images.split(","); // 将 images 字符串按逗号拆分成数组
								if (image.length >= 2) {
									item.images = image[0]; // 取第一个图片
								}
								// 根据当前选择的分类过滤商品
								return item.type === this.name;
							})
								: res.data.data; // 如果没有选择分类，则返回所有商品
						}
					}
				});
			},
			// 点击分类项时触发的函数
			clickItem(item, index) {
				// 设置当前选中的分类索引
				this.current = index;
				// 如果选择的是 '全部' 分类，则不进行过滤
				this.name = item.type === '全部' ? '' : item.type;
				// 重置页码为 1
				this.pageNum = 1;
				// 重新查询商品列表
				this.getlist();
			},
			// 获取分类列表
			geticon(){
				uni.request({
					url: this.$url + '/api/type', // 请求分类 API
					method: 'GET', // GET 请求
					header: this.$head, // 请求头
					success: (res) => {
						console.log(res); // 打印响应数据
						this.icon = res.data.data; // 更新分类数据
					}
				})
			},
			// 跳转到商品详情页
			godetail(item){
				uni.navigateTo({
					// 使用商品的 ID 来构造详情页的 URL
					url: `/pages/detail/detail?id=${item.id}`
				})
			}
		}
	}
</script>

```

##### css

```css
<style lang="scss" scoped>
	.u-card-wrap { 
		background-color: $u-bg-color; // 设置卡片背景色
		padding: 1px;
	}
	
	.u-body-item {
		font-size: 32rpx; // 设置商品标题的字体大小
		color: #333; // 设置字体颜色
		padding: 20rpx 10rpx; // 设置内边距
	}
		
	.u-body-item image {
		width: 220rpx; // 设置图片宽度
		flex: 0 0 220rpx; // 设置图片的 flex 属性
		height: 220rpx; // 设置图片高度
		border-radius: 8rpx; // 设置图片圆角
		margin-left: 12rpx; // 设置图片左边距
	}
	.box {
		height: 100%; // 设置整个容器的高度为 100%
		.content_main {
			margin-top: 20rpx; // 设置主内容的上边距
			display: flex; // 使用 flex 布局
			justify-content: space-between; // 两边对齐
		}
		.option {
			width: 35%; // 设置分类部分的宽度为 35%
			background-color: #fdfdfd; // 设置背景色
			border-radius: 0rpx 20rpx 0rpx 0rpx; // 设置圆角
			overflow-y: auto; // 允许垂直滚动
			height: 1300rpx; // 设置高度
			border-right: 1rpx solid #f7f7f7; // 设置右边框
			.item {
				width: 100%; // 设置每个分类项的宽度为 100%
				height: 120rpx; // 设置分类项高度
				display: flex; // 使用 flex 布局
				align-items: center; // 垂直居中
				justify-content: center; // 水平居中
				color: #858585; // 设置默认字体颜色
				border-radius: 0rpx 20rpx 20rpx 0rpx; // 设置分类项圆角
				transition: background-color 0.3s ease, color 0.3s ease, font-weight 0.3s ease; // 设置过渡效果
				animation: slideIn 5s ease; // 设置动画效果
				&.name {
					background-color: #f3f3f3; // 选中分类的背景色
					color: #000; // 选中分类的字体颜色
					font-weight: bold; // 选中分类的字体加粗
				}
			}
		}
	}
</style>
```

#### detail教程详情

##### html


```html
<template>
	<view>
		<!-- 轮播图 -->
		<u-swiper class="u-m-10" :list="swiper" height="1100" img-mode="aspectFill"></u-swiper>

		<!-- 标题 -->
		<view style="padding: 25rpx; font-size: 46rpx; font-weight: bold;">{{list.name}}</view>

		<!-- 简略描述 -->
		<view style="padding: 15rpx; font-size: 36rpx;">{{list.line}}</view>

		<!-- 点赞和收藏功能 -->
		<view class="u-m-20" style="display: flex;">
			<!-- 点赞 -->
			<view class="u-m-r-100" @click="getlike(id)">
				<!-- 点赞成功 -->
				<view>
					<view style="" v-if="good" @click="good=false">
						<image src="../../static/点赞.png" style="width: 75rpx; height: 75rpx;"></image>
					</view>
				</view>
				<!-- 取消点赞 -->
				<view>
					<view style="" v-if="!good" @click="good=true">
						<image src="../../static/点赞 (1).png" style="width: 75rpx; height: 75rpx;"></image>
					</view>
				</view>
			</view>

			<!-- 收藏 -->
			<view class="u-m-l-60" @click="getcoll(id)">
				<!-- 收藏成功 -->
				<view>
					<view style="" v-if="coll" @click="coll=false">
						<image src="../../static/收藏.png" style="width: 75rpx; height: 75rpx;"></image>
					</view>
				</view>
				<!-- 取消收藏 -->
				<view>
					<view style="" v-if="!coll" @click="coll=true">
						<image src="../../static/收藏 (1).png" style="width: 75rpx; height: 75rpx;"></image>
					</view>
				</view>
			</view>
		</view>
		
		<hr class="u-m-t-10">

		<!-- 评论部分 -->
		<u-section title="评论" class="u-m-t-30 u-m-l-20" fontSize="36" :right="false"></u-section>

		<!-- 发表评论 -->
		<view style="display: flex;" class="u-m-20">
			<!-- 用户头像 -->
			<image :src="'http://127.0.0.1:3006/'+user.avatar" mode="aspectFill" style="width: 88rpx; height: 88rpx; border-radius: 50rpx;"></image>

			<!-- 评论输入框 -->
			<u-input v-model="comment" :auto-height="true" :border="true" class="u-m-l-20" style="background-color: #f7f7f7;"/>
			<!-- 发送按钮 -->
			<u-button @click="setcomment()" :plain="true" type="error" style="margin-left: 10rpx;">发送</u-button>
		</view>
		
		<hr class="u-m-t-20">

		<!-- 评论区 -->
		<view style="display: flex; margin-top: 35rpx; margin-left: 20rpx;" v-for="item in type">
			<!-- 用户头像 -->
			<u-avatar :size="140" :src="'http://127.0.0.1:3006/'+item.avatar" class="head" size="large" style="padding-left: 5rpx;"></u-avatar>

			<!-- 用户名 -->
			<view style="font-size: 36rpx; padding-left: 25rpx;">{{item.username}}</view>

			<!-- 评论内容 -->
			<view style="font-size: 40rpx; margin-top: 50rpx;margin-left: -70rpx;">{{item.comment}}</view>
		</view>
	</view>
</template>

```
##### js

```js
<script>
	export default {
		// data函数，用于初始化组件的数据
		data() {
			return {
				id: '',           // 用于存储商品/项的ID
				list: [],         // 存储商品的详细信息
				swiper: [],       // 存储轮播图的图片
				good: true,       // 判断是否已点赞
				coll: true,       // 判断是否已收藏
				likeid: [],       // 存储用户喜欢的ID
				collid: [],       // 存储用户收藏的ID
				type: [],         // 存储评论的类型/数据
				user: [],         // 存储用户信息
				comment: '',      // 存储评论内容
				times: ''         // 存储时间信息
			};
		},
		// 页面加载时执行的操作
		onLoad(e) {
			this.id = e.id; // 获取ID并渲染相关内容
			this.getdetail();  // 获取商品的详细信息
			this.getcomment(); // 获取评论列表
			this.getuser();    // 获取用户信息
		},
		methods: {
			// 查询用户信息的函数
			getuser() {
				console.log(this.$head);  // 输出请求头信息，用于调试
				uni.request({
					url: this.$url + '/info/userinfo',  // 请求用户信息的接口
					method: 'GET',
					header: this.$head,  // 请求头
					success: (res) => {  // 请求成功的回调
						console.log(res);  // 输出返回结果，用于调试
						this.user = res.data.user; // 将返回的用户信息存储在user中
						console.log(this.user);  // 输出存储的用户信息
					}
				})
			},
			// 获取商品详细信息的函数
			getdetail() {
				uni.request({
					url: this.$url + '/api/detail',  // 请求商品详情的接口
					method: 'GET',
					header: this.$head,  // 请求头
					success: (res) => {  // 请求成功的回调
						// 找到对应ID的商品详情
						const detail = res.data.data.find(item => item.id == this.id);
						if (detail) {
							this.list = detail;  // 存储商品详情
							// 将图片地址分割并格式化
							this.swiper = detail.images.split(',').map(image => {
								return 'http://127.0.0.1:3006/detail/' + image;
							});
						}
					}
				});
			},
			// 查询用户喜欢的商品
			setlike() {
				uni.request({
					url: this.$url + '/api/like',  // 请求喜欢信息的接口
					method: 'GET',
					header: this.$head,  // 请求头
					success: (res) => {  // 请求成功的回调
						console.log(res);  // 输出返回结果，用于调试
						this.likeid = res.data.data[0].likeid;  // 存储用户喜欢的商品ID
					}
				})
			},
			// 发送点赞请求的函数
			getlike(id) {
				if (this.good == true) {  // 如果已点赞，发送取消点赞请求
					uni.request({
						url: this.$url + '/api/dellike/' + this.likeid,  // 请求取消点赞的接口
						method: 'GET',
						header: this.$head,  // 请求头
						success: (res) => {  // 请求成功的回调
							console.log(res);  // 输出返回结果，用于调试
							this.likeid = this.like;  // 更新点赞状态
							uni.showToast({
								title: '取消成功',
								icon: 'success'
							});  // 显示取消点赞成功的提示
						}
					})
				} else {  // 如果未点赞，发送点赞请求
					uni.request({
						url: this.$url + '/api/like',  // 请求点赞的接口
						method: 'POST',
						header: this.$head,  // 请求头
						data: { like: this.id },  // 传递商品ID作为点赞的目标
						success: (res) => {  // 请求成功的回调
							this.like = this.like;  // 更新点赞状态
							uni.showToast({
								title: '点赞成功',
								icon: 'success'
							});  // 显示点赞成功的提示
						}
					});
					this.setlike(this.like);  // 获取最新的点赞状态
					console.log(this.like);  // 输出当前点赞状态
				}
			},
			// 查询用户收藏的商品
			setcoll() {
				uni.request({
					url: this.$url + '/api/coll',  // 请求收藏信息的接口
					method: 'GET',
					header: this.$head,  // 请求头
					success: (res) => {  // 请求成功的回调
						console.log(res);  // 输出返回结果，用于调试
					}
				})
			},
			// 发送收藏请求的函数
			getcoll(id) {
				if (this.coll == true) {  // 如果已收藏，发送取消收藏请求
					uni.request({
						url: this.$url + '/api/delcoll/' + this.collid,  // 请求取消收藏的接口
						method: 'GET',
						header: this.$head,  // 请求头
						success: (res) => {  // 请求成功的回调
							console.log(res);  // 输出返回结果，用于调试
							this.collid = this.coll;  // 更新收藏状态
							uni.showToast({
								title: '取消成功',
								icon: 'success'
							});  // 显示取消收藏成功的提示
						}
					});
					this.setcoll(this.coll);  // 获取最新的收藏状态
					console.log(this.coll);  // 输出当前收藏状态
				} else {  // 如果未收藏，发送收藏请求
					uni.request({
						url: this.$url + '/api/coll',  // 请求收藏的接口
						method: 'POST',
						header: this.$head,  // 请求头
						data: { coll: this.id },  // 传递商品ID作为收藏的目标
						success: (res) => {  // 请求成功的回调
							this.coll = this.coll;  // 更新收藏状态
							uni.showToast({
								title: '收藏成功',
								icon: 'success'
							});  // 显示收藏成功的提示
						}
					});
					this.setcoll(this.coll);  // 获取最新的收藏状态
					console.log(this.coll);  // 输出当前收藏状态
				}
			},
			// 查询评论的函数
			getcomment() {
				uni.request({
					url: this.$url + '/api/comment',  // 请求评论的接口
					method: 'GET',
					header: this.$head,  // 请求头
					success: (res) => {  // 请求成功的回调
						console.log(res);  // 输出返回结果，用于调试
						// 过滤出与当前商品ID相关的评论
						this.type = res.data.data.filter(item => item.commid == this.id);
					}
				})
			},
			// 发布评论的函数
			setcomment() {
			    uni.request({
			        url: this.$url + '/api/comment',  // 请求发布评论的接口
			        method: 'POST',
			        header: this.$head,  // 请求头
			        data: {
			            commid: this.id,  // 商品ID
			            avatar: this.user.avatar,  // 用户头像
			            username: this.user.nickname,  // 用户昵称
			            comment: this.comment  // 评论内容
			        },
			        success: (res) => {  // 请求成功的回调
			            console.log(this.comment);  // 输出评论内容，用于调试
			            console.log('发布成功');  // 输出发布成功的提示
			            uni.showToast({
			                title: '发布成功',  // 显示发布成功的提示
			                icon: 'success'
			            });
			        }
			    });
			}
		}
	}
</script>

```

##### css

```css
<style lang="scss">
  hr {
        border: none; /* 移除默认边框 */
        height: 0.5rpx; /* 设置线条高度 */
        background-color: #afafaf; /* 设置线条颜色 */
    }
</style>
```

#### hos喜欢页面

##### html

```html
<template>
	<view>
		<!-- 循环渲染 list 数组中的每一项 -->
		<view @click="godetail(item)" style="margin: 30rpx;" class="u-body-item u-flex u-boder-bottom u-col-between u-p-t-0" v-for="item in list" :key="item.collid">
			<!-- 显示图片，动态绑定图片 URL -->
			<image :src="`http://127.0.0.1:3006/list/` + item.images" style="width: 280rpx; height: 280rpx; border-radius: 10rpx"></image>
			
			<!-- 项目标题，显示项目名称 -->
			<view class="u-body-item-title u-line-2">
				<view class="u-body-item-title u-line-1" style="margin-left: 30rpx; font-weight: bold; font-size: 50rpx;">
					{{ item.name }} <!-- 项目名称 -->
				</view>
				
				<!-- 项目类型，显示项目的类型 -->
				<view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 28rpx; color:#afafaf">
					{{ item.type }} <!-- 项目类型 -->
				</view>
				
				<!-- 项目的简短描述 -->
				<view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 28rpx; color:#afafaf">
					{{ item.Briefly }} <!-- 项目简短描述 -->
				</view>
				
				<!-- 取消点赞按钮，点击后调用 delcoll 方法取消点赞 -->
				<u-button @click="delcoll(item.likeid)" :plain="true" type="error" style="margin-top: 20rpx; margin-right: 20rpx; width: 200rpx;">取消点赞</u-button>
			</view>
		</view>
	</view>
</template>
```

##### js

```js
<script>
	export default {
		data() {
			return {
				list: [] // 存储喜欢的项目列表
			};
		},
		onLoad() {
			this.savecoll(); // 页面加载时查询喜欢的项目
		},
		methods: {
			// 查询喜欢的项目，向服务器请求获取数据
			savecoll() {
				uni.request({
					url: this.$url + '/api/like', // 请求接口 URL
					method: 'GET', // 请求方法为 GET
					header: this.$head, // 请求头
					success: (res) => {
						console.log(res); // 打印返回的响应数据
						this.list = res.data.data; // 将返回的喜欢的项目列表保存到 list 中
					}
				});
			},
			// 取消喜欢的项目，删除指定项
			delcoll(likeid) {
				uni.request({
					url: this.$url + '/api/dellike/' + likeid, // 删除接口 URL，使用 likeid 作为标识
					method: 'GET', // 请求方法为 GET
					header: this.$head, // 请求头
					success: (res) => {
						console.log(res); // 打印删除成功的响应数据
						// 从 list 中移除被删除的项目
						this.list = this.list.filter(item => item.likeid !== likeid);
						// 显示删除成功的提示
						uni.showToast({
							title: '取消成功', // 提示内容
							icon: 'success'  // 提示图标
						});
					}
				});
			},
			// 跳转到项目详情页，传递项目的 collid
			godetail(item) {
				uni.navigateTo({
					url: `/pages/detail/detail?id=${item.collid}` // 跳转的页面 URL，携带项目的 collid
				});
			}
		}
	}
</script>
```

#### index首页

##### html


```html
<template>
	<view class="content">
		<!-- 搜索框 -->
		<u-search @search="gosearch" @custom="gosearch" v-model="keyword" class="u-m-30"></u-search>
		<!-- 轮播图 -->
		<u-swiper class="u-m-20" :list="swiper" mode="number" height="350"></u-swiper>
		<!-- 分类 -->
		<u-section title="妆容分类" class="u-m-t-20 u-m-l-20" fontSize="36" :right="false"></u-section>
		<view class="u-m-t-20">
			<u-grid :col="6" :border="false">
				<u-grid-item v-for="item in type.slice(0,5)" @click="goclassifly(item)">
					<image :src="`http://127.0.0.1:3006/icon/`+item.icon" style="width: 80rpx; height: 80rpx;"></image>
					<view>{{item.type}}</view>
				</u-grid-item>
				<!-- 更多按钮 -->
				<u-grid-item @click="gotype">
					<image src="../../static/个护化妆.png" style="width: 80rpx; height: 80rpx;"></image>
					<view>更多</view>
				</u-grid-item>
			</u-grid>
		</view>
		<!-- 推荐列表 -->
		<u-section title="妆容教程" class="u-m-t-20 u-m-l-20" fontSize="36"></u-section>
		<view>
		    <view>
		      <u-grid :border="false" col="2" style="padding: 2%"  >
		        <!-- 列表项 -->
		        <u-grid-item v-for="item in list.slice(0,10)" style="margin-top: 20rpx" @click="godetail(item)"  >
		          <view>
		            <!-- 图片展示 -->
		            <image :src="`http://127.0.0.1:3006/list/`+item.images" mode="aspectFill" style="width: 320rpx; height: 320rpx;border-radius: 10rpx" ></image>
		            <!-- 标题 -->
		            <view class="u-line-2" style="font-size: 40rpx; width: 300rpx;">{{item.name}}</view>
		            <!-- 简介 -->
		            <view style="font-size: 36rpx;overflow: hidden;text-overflow:ellipsis; white-space: nowrap; width: 160rpx;color: #d6d6d6;margin-top: 8rpx">{{item.Briefly}}</view>
		          </view>
		        </u-grid-item>
		      </u-grid>
		    </view>
		</view>
	</view>
</template>

```
##### js

```js
<script>
	export default {
		data() {
			return {
				swiper:[], // 轮播图数组
				type:[], // 分类数组
				list:[], // 列表数据数组
				keyword:'' // 搜索框的内容
			}
		},
		onLoad() {
			this.getimage() // 调用获取轮播图方法
			this.gettype() // 调用获取分类方法
			this.getlist() // 调用获取列表方法
		},
		methods: {
			// 获取轮播图
			getimage(){
				uni.request({
					url:this.$url+'/api/swiper', // 请求的接口地址
					method:'GET', // 请求方式
					header:this.$head, // 请求头
					success: (res) => { // 请求成功回调
						this.swiper=res.data.data.map(item=>{
							// 获取轮播图图片的地址，并处理成完整的URL
							return	'http://127.0.0.1:3006/swiper/'+item.image
						})
					}
				})
			},
			// 获取分类列表
			gettype(){
				uni.request({
					url:this.$url+'/api/type', // 请求的接口地址
					method:'GET', // 请求方式
					header:this.$head, // 请求头
					success: (res) => { // 请求成功回调
						this.type=res.data.data // 将返回的分类数据赋值给type
					}
				})
			},
			// 获取列表
			getlist(){
				uni.request({
					url:this.$url+'/api/list', // 请求的接口地址
					method:'GET', // 请求方式
					header:this.$head, // 请求头
					success: (res) => { // 请求成功回调
						console.log(res) // 打印返回的数据
						this.list=res.data.data // 将返回的列表数据赋值给list
					}
				})
			},
			// 跳转到分类页面
			gotype(){
				uni.navigateTo({
					url:'/pages/classify/classify' // 跳转到分类页面
				})
			},
			// 跳转到指定分类的页面
			goclassifly(item){
				uni.navigateTo({ 
					url:`/pages/type/type?typeid=${item.typeid}` // 根据分类ID跳转到对应的分类页面
				})
			},
			// 跳转搜索页并带搜索框中的内容
			gosearch(){
				uni.navigateTo({
					url:`/pages/search/search?name=${this.keyword}` // 将搜索框中的内容传递给搜索页面
				})
			},
			// 跳转到详情页
			godetail(item){
				uni.navigateTo({
					url:`/pages/detail/detail?id=${item.id}` // 根据商品ID跳转到对应的详情页
				})
			}
		}
	}
</script>

```

#### login登录

##### html

```html
<template>
    <!-- 页面根视图 -->
    <view>
        <!-- 绝对定位的视图，用于显示“欢迎登录”文字，设置了距离顶部和左侧的位置以及字体大小 -->
        <view style="position: absolute;top: 200rpx;left: 60rpx;font-size: 60rpx;">
            <!-- 内部视图，显示“欢迎登录”文本内容 -->
            <view>欢迎登录</view>
        </view>
        <!-- 登录表单所在的视图，同样是绝对定位，设置了距离顶部和左侧的位置 -->
        <view class="login-from" style="position: absolute; top: 350rpx;left: 80rpx;">
            <!-- 用于输入账号的视图，设置了弹性布局、背景色、宽度、内边距、圆角等样式 -->
            <view style="display: flex; background:Rgba(255, 255, 255, 0.6); width: 600rpx; padding: 20rpx; border-radius: 50rpx; ">
                <!-- 账号输入框组件，双向绑定数据到username变量，无边框，设置了文字颜色、占位符等样式 -->
                <u-input v-model="username" :border="false" color="#fff" placeholder="请输入账号" style="padding-left:25rpx;" placeholder-style="color:#333"></u-input>
            </view>
            <!-- 用于输入密码的视图，样式与账号输入框所在视图类似，只是距离顶部有一定间隔 -->
            <view style="display: flex; background:Rgba(255, 255, 255, 0.6); width: 600rpx; padding: 20rpx; border-radius: 50rpx; margin-top: 20rpx;">
                <!-- 密码输入框组件，双向绑定数据到password变量，类型为密码，无边框，设置了文字颜色、占位符等样式 -->
                <u-input v-model="password" type="password" :border="false" color="#fff" placeholder="请输入密码" style="padding-left:25rpx;" placeholder-style="color:#333"></u-input>
            </view>
            <!-- 登录按钮组件，形状为圆形，类型为主要按钮样式，点击时调用login方法 -->
            <u-button shape="circle" type="primary" class="u-m-t-30"  @click="login">登录</u-button>
            <!-- 用于显示提示文本及注册链接的视图，设置了文本居中以及距离顶部的间隔 -->
            <view style="text-align: center;margin-top: 35rpx;">
                <!-- 灰色的提示文本，显示“没有账号?” -->
                <text class="text-grey1">没有账号?</text>
                <!-- 如果没有账号，点击注册文字调用reguser方法 -->
                <text style="color: #fff1f6;" @click="reguser()">立即注册</text>
            </view>
        </view>
    </view>
</template>
```

##### js

```js
<script>
    export default {
        data() {
            return {
                // 用于存储输入的账号数据，初始为空字符串
                username:'',
                // 用于存储输入的密码数据，初始为空字符串
                password:''
            };
        },
        onLoad() {
            // 页面加载时的生命周期钩子，此处为空逻辑
        },
        methods:{
            // 跳转到注册页面的方法，使用uni.navigateTo进行页面跳转，跳转到指定的注册页面路径
            reguser(){
                uni.navigateTo({
                    url:'/pages/reguser/reguser'
                })
            },
            // login登录方法，发送post请求到后端进行登录验证
            login(){
                uni.request({
                    // 请求的后端接口地址，通过this.$url拼接具体的登录接口路径
                    url:this.$url+'/user/login',
                    // 请求方法为POST
                    method:'POST',
                    // 请求头，通过this.$head设置
                    header:this.$head,
                    data:{
                        // 将输入的账号数据作为请求参数的username字段发送给后端
                        username:this.username,
                        // 将输入的密码数据作为请求参数的password字段发送给后端
                        password:this.password
                    },
                    success:(res)=>{
                        console.log(res);
                        // 根据后端返回的消息判断登录是否失败，如果是相应的失败提示，则显示登录失败的Toast提示
                        if(res.data.message=="登录失败"||res.data.message=='密码输入错误'){
                            uni.showToast({
                                title:'登录失败，账号或密码错误',
                                icon:'error'
                            })
                        }else{
                            // 登录成功，将后端返回的token值存储到本地缓存中
                            uni.setStorageSync("token",res.data.token);
                            console.log(res);
                            // 显示登录成功的Toast提示
                            uni.showToast({
                                title:'登录成功',
                                icon:'success'
                            });
                            // 设置一个延迟，2秒后使用uni.reLaunch重新启动页面，跳转到指定的首页路径
                            setTimeout(()=>{
                                uni.reLaunch({
                                    url: '/pages/index/index'
                                })
                            },2000);
                        }
                    }
                })
            }
        }
    }
</script>
```

#### newaddress新增地址

##### html

```html
<template>
    <!-- 页面根视图 -->
    <view>
        <!-- 使用u-section组件展示标题“管理地址”，设置了距离顶部、左侧的间距以及字体大小，并且右侧不显示额外内容 -->
        <u-section title="管理地址" class="u-m-t-20 u-m-l-20" fontSize="36" :right="false"></u-section>
        <!-- 通过v-if指令判断，如果收货地址数组的长度大于0，则显示下面的收货地址相关内容 -->
        <view v-if="address.length > 0">
            <!-- 使用u-card组件循环遍历address数组，每个元素对应一个收货地址信息，设置了卡片标题为收件人姓名，副标题为电话号码 -->
            <u-card v-for="(item, index) in address" :key="index" :title="item.recipient_name" :sub-title="item.phone_number">
                <!-- 使用具名插槽定义卡片主体内容 -->
                <template v-slot:body>
                    <view>
                        <!-- 展示收货地址具体信息及设为默认地址相关操作的视图，设置了弹性布局、底部边框、列方向两端对齐、顶部内边距为0等样式 -->
                        <view class="u-body-item u-flex u-border-bottom u-col-between u-p-t-0">
                            <!-- 展示收货地址文本内容，通过插值表达式显示具体地址信息 -->
                            <view class="u-body-item-title u-line-2">收货地址：{{ item.address }}</view>
                            <!-- 按钮用于设置默认地址，点击时调用setDefaultAddress方法，类型为文本按钮，设置了文字颜色 -->
                            <u-button @click="setDefaultAddress(index)" type="text" style="color: #007aff;">
                                {{ item.isDefault? '默认地址' : '设为默认' }}
                            </u-button>
                        </view>
                    </view>
                </template>
            </u-card>
        </view>
        <!-- 如果收货地址数组长度为0（即没有收货地址），则显示下面提示没有收货地址的视图，设置了外边距和字体大小 -->
        <view v-else style="margin: 30rpx; font-size: 36rpx;">
            <p>没有收货地址可显示</p>
        </view>
        <!-- 新增地址按钮，点击时将show变量设为true以显示弹出层，设置了外边距和按钮类型为主要按钮 -->
        <u-button @click="show = true" style="margin: 50rpx;" type="primary">新增地址</u-button>
        <!-- 弹出层组件，通过v-model双向绑定show变量来控制显示隐藏，设置了弹出模式为底部弹出、圆角半径和高度 -->
        <u-popup v-model="show" mode="bottom" border-radius="14" height="400px">
            <!-- u-form表单组件，绑定了form数据对象，设置了引用名称、外边距以及标签宽度 -->
            <u-form :model="form" ref="form1" class="u-m-30" label-width="120">
                <!-- 表单项目，用于输入收货人信息，设置了标签为“收货人”，对应表单数据的属性名为name -->
                <u-form-item label="收货人" prop="name"><u-input placeholder="请输入昵称" v-model="form.name" /></u-form-item>
                <!-- 表单项目，用于输入手机号码信息，设置了标签为“手机号码”，对应表单数据的属性名为phone -->
                <u-form-item label="手机号码" prop="phone"><u-input placeholder="请输入手机号码" v-model="form.phone" /></u-form-item>
                <!-- 表单项目，用于输入地址信息，设置了标签为“地址”，对应表单数据的属性名为address -->
                <u-form-item label="地址" prop="address"><u-input placeholder="请输入地址" v-model="form.address" /></u-form-item>
            </u-form>
            <!-- 新增按钮，点击时调用addAddress方法，设置了外边距和按钮类型为主要按钮 -->
            <u-button @click="addAddress()" style="margin: 50rpx;" type="primary">新增</u-button>
        </u-popup>
    </view>
</template>

```

##### js

```js
<script>
export default {
    data() {
        return {
            // 控制弹出层显示隐藏的变量，初始为false表示隐藏
            show: false,
            // 用于存储收货地址信息的数组，初始为空
            address: [],
            // 表单数据对象，用于新增地址时收集输入的信息，各字段初始为空字符串或设置了默认地址提示
            form: {
                name: "",
                phone: '',
                address: '这里可以写默认地址',
            }
        };
    },
    onLoad() {
        // 页面加载时调用获取地址的方法
        this.getAddress();
    },
    methods: {
        // 查询地址的方法，向服务器发送GET请求获取收货地址列表
        getAddress() {
            uni.request({
                // 请求的地址，通过this.$url拼接/api/address路径
                url: this.$url + '/api/address',
                // 请求方法为GET
                method: 'GET',
                // 设置请求头
                header: this.$head,
                success: (res) => {
                    // 将服务器返回的地址数据赋值给address数组
                    this.address = res.data.data;
                    console.log(this.address);
                    // 调用加载默认地址的方法
                    this.loadDefaultAddress();
                }
            });
        },
        // 新增地址的方法，向服务器发送POST请求添加新的收货地址
        addAddress() {
            uni.request({
                // 请求的地址，通过this.$url拼接/api/address路径
                url: this.$url + '/api/address',
                // 请求方法为POST
                method: 'POST',
                // 设置请求头
                header: this.$head,
                // 要发送给服务器的地址相关数据，从form对象中获取收货人姓名、手机号码、地址等信息
                data: {
                    recipient_name: this.form.name,
                    phone_number: this.form.phone,
                    address: this.form.address
                },
                success: (res) => {
                    // 显示新增成功的提示Toast
                    uni.showToast({
                        title: '新增成功',
                        icon: 'success'
                    });
                    // 隐藏弹出层
                    this.show = false;
                    // 重新查询地址列表，刷新显示
                    this.getAddress(); 
                }
            });
        },
        // 设置默认地址的方法，根据传入的索引来设置默认地址，并保存到本地存储
        setDefaultAddress(index) {
            // 遍历所有地址，将除了当前点击的地址外，其他地址的isDefault属性设为false
            this.address.forEach((item, i) => {
                item.isDefault = i === index;
            });
            // 将当前点击设为默认的地址保存到本地存储中
            uni.setStorageSync('defaultAddress', this.address[index]);
            // 显示已设置为默认地址的提示Toast
            uni.showToast({
                title: '已设置为默认地址',
                icon: 'success'
            });
        },
        // 加载默认地址的方法，从本地存储中获取默认地址信息，并在地址列表中标记对应的地址为默认地址
        loadDefaultAddress() {
            // 从本地存储中获取默认地址信息
            const defaultAddress = uni.getStorageSync('defaultAddress');
            if (defaultAddress) {
                // 在地址列表中查找与本地存储中默认地址匹配的地址索引
                const index = this.address.findIndex(item => item.address === defaultAddress.address);
                if (index!== -1) {
                    // 如果找到匹配的地址，将其isDefault属性设为true
                    this.address[index].isDefault = true;
                }
            }
        }
    }
}
</script>
```

##### css

```css
<style lang="scss">
.u-card-wrap {
    // 设置u-card-wrap类的背景颜色，通过变量$u-bg-color（应该在其他地方定义过）来设置，设置了内边距
    background-color: $u-bg-color;
    padding: 1px;
}

.u-body-item {
    // 设置u-body-item类的字体大小、文字颜色以及内边距
    font-size: 32rpx;
    color: #333;
    padding: 20rpx 10rpx;
}
</style>
```

#### order订单页

##### html

```html
<template>
    <!-- 页面根视图 -->
    <view>
        <!-- 使用u-section组件展示标题“商品列表”，设置了距离顶部、左侧的间距以及字体大小，并且右侧不显示额外内容 -->
        <u-section title="商品列表" class="u-m-t-20 u-m-l-20" fontSize="36" :right="false"></u-section>
        <!-- 循环展示商品信息的视图，设置了外边距以及一些布局相关的样式类，通过v-for指令遍历order数组来展示每个商品信息，以商品的id作为唯一标识 -->
        <view style="margin:20rpx;" class="u-body-item u-flex u-boder-bottom u-col-between u-p-t-0" v-for="item in order" :key="item.id">
            <!-- 展示商品图片的image标签，通过拼接字符串的方式设置图片的src属性，指定了图片的展示模式为aspectFill，设置了图片高度和圆角半径 -->
            <image :src="`http://127.0.0.1:3006/hzlist/` + item.images" mode="aspectFill" style="height: 260rpx; border-radius: 20rpx;"></image>
            <!-- 展示商品文字相关信息的视图，包含商品名称、类型、价格、种草人数等 -->
            <view class="u-body-item-title u-line-2">
                <!-- 展示商品名称的视图，设置了距离左侧的间距、字体大小以及加粗样式 -->
                <view class="u-body-item-title u-line-2" style="margin-left: 20rpx; font-size: 36rpx; font-weight: bold;">
                    {{ item.name }}
                </view>
                <!-- 展示商品类型的视图，设置了距离左侧、顶部的间距以及字体大小、文字颜色 -->
                <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 28rpx; color:#afafaf">
                    {{ item.type }}
                </view>
                <!-- 包含价格和种草人数展示的弹性布局视图 -->
                <view style="display: flex;">
                    <!-- 展示商品价格的视图，设置了距离左侧、顶部的间距以及字体大小、文字颜色 -->
                    <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 36rpx; color:red">
                        {{ item.price }}元
                    </view>
                    <!-- 展示商品种草人数的视图，设置了距离左侧、顶部的间距以及字体大小、文字颜色 -->
                    <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 36rpx; color:red">
                        {{ item.Plant }}人种草
                    </view>
                </view>
            </view>
        </view>
        <!-- 使用u-section组件展示标题“收货地址”，设置了距离顶部、左侧的间距以及字体大小，并且右侧不显示额外内容 -->
        <u-section title="收货地址" class="u-m-t-20 u-m-l-20" fontSize="36" :right="false"></u-section>
        <!-- 根据收货地址数组长度判断是否显示内容的视图，如果地址数组长度大于0则显示下面内容 -->
        <view class="u-m-30" v-if="address.length > 0">
            <!-- 如果存在默认地址则显示下面包含选择地址信息的视图 -->
            <view v-if="defaultAddress" style="font-size: 36rpx;">
                <text>选择地址：</text>
                <text>{{ defaultAddress.recipient_name }} {{ defaultAddress.phone_number }} {{ defaultAddress.address }}</text>
            </view>
        </view>
        <!-- 如果收货地址数组长度为0（即没有收货地址），则显示下面提示没有收货地址的视图，设置了外边距和字体大小 -->
        <view v-else style="margin: 30rpx; font-size: 36rpx;">
            <p>没有收货地址可显示</p>
        </view>
        <!-- 新增地址的点击文本，设置了文本居中、字体大小和文字颜色，点击时可触发newaddress方法 -->
        <p @click="newaddress" style="text-align: center; font-size: 36rpx; color:darkblue">新增地址</p>
        <!-- 展示价格信息的视图，设置了外边距以及加粗、字体大小等样式 -->
        <view class="u-m-30">
            <view style="font-size: 36rpx; font-weight: bold;">价格:{{this.price}}</view>
        </view>
        <!-- 支付按钮，点击时将show变量设为true以显示弹出的支付密码输入框，设置了外边距 -->
        <u-button style="margin: 50rpx;" @click="show=true">支付</u-button>
        <!-- 弹出的模态框（用于输入支付密码），通过v-model双向绑定show变量来控制显示隐藏，确认时触发edit方法 -->
        <u-modal v-model="show"  @confirm="edit">
            <!-- 支付密码输入框组件，双向绑定数据到value变量，设置了外边距、类型为密码以及最大输入长度 -->
            <u-input v-model="value" class="u-m-30" type="password" maxlength="6" ></u-input>
        </u-modal>
    </view>
</template>
```

##### js

```js
<script>
    export default {
        data() {
            return {
                // 用于存储总价信息，初始为空字符串
                price:'',
                // 可能用于存储一些列表数据，初始为空数组
                list:[],
                // 用于存储商品信息的数组，初始为空数组
                order:[],
                // 用于存储收货地址信息的数组，初始为空数组
                address:[],
                // 控制支付密码输入框模态框显示隐藏的变量，初始为false表示隐藏
                show:false,
                // 用于存储输入的支付密码，初始为空字符串
                value:'',
                // 用于存储默认收货地址信息，初始为null
                defaultAddress: null,
            };
        },
        onLoad(e) {
            // 将传入的总价信息赋值给price变量
            this.price=e.totalPrice;
            // 将传入的选中商品的id列表赋值给list变量
            this.list=e.selectedIds;
            // 调用查询购物车商品信息的方法
            this.getshop();
            // 调用查询收货地址的方法
            this.getaddress();
            // 调用加载默认收货地址的方法
            this.loadDefaultAddress();
        },
        methods:{
            // 支付相关操作的方法，根据输入的支付密码情况进行相应处理
            edit(){
                // 如果输入的支付密码为0（可能这里判断不太准确，应该是判断为空字符串更合适），则显示提示请输入支付密码的Toast
                if(this.value==0){
                    uni.showToast({
                        title:'请输入支付密码',
                        icon:'error'
                    })
                }else{
                    // 如果输入了支付密码，显示支付成功的Toast，并设置一个延迟，2秒后重新启动页面跳转到首页
                    uni.showToast({
                        title:'支付成功',
                        icon:'success'
                    })
                    setTimeout(()=>{
                        uni.reLaunch({
                            url:'/pages/index/index'
                        })
                    },2000)
                }
                // 如果收货地址数组为空（即没有地址），则显示提示请新增地址的Toast，这里的判断逻辑可能不太完善，应该结合业务更准确判断是否能进行支付等情况
                if(this.address==0){
                    uni.showToast({
                        title:'请新增地址',
                        icon:'error'
                    })
                }
            },
            // 查询购物车商品信息的方法，向服务器发送GET请求获取商品数据，并根据之前选中的商品id进行筛选
            getshop(list) {
                uni.request({
                    // 请求的地址，通过this.$url拼接/api/shop路径
                    url: this.$url + '/api/shop',
                    // 请求方法为GET
                    method: 'GET',
                    // 设置请求头
                    header: this.$head,
                    success: (res) => {
                        // 从服务器返回的数据中筛选出在选中商品id列表中的商品信息，赋值给order数组
                        this.order = res.data.data.filter(item => this.list.includes(item.id));
                    }
                });
            },
            // 从本地存储中加载默认收货地址信息的方法，获取存储的默认地址并赋值给defaultAddress变量
            loadDefaultAddress() {
                this.defaultAddress = uni.getStorageSync('defaultAddress');
            },
            // 查询收货地址的方法，向服务器发送GET请求获取收货地址列表
            getaddress(){
                // 发送GET请求，请求的地址通过this.$url拼接/api/address路径
                uni.request({
                    url:this.$url+'/api/address',
                    method:'GET',
                    header:this.$head,
                    success: (res) => {
                        // 将服务器返回的地址数据赋值给address数组，并在控制台打印地址信息
                        this.address=res.data.data
                        console.log(this.address)
                    }
                })
            },
            // 新增地址的方法，通过页面跳转导航到新增地址的页面
            newaddress(){
                uni.navigateTo({
                    url:'/pages/newaddress/newaddress'
                })
            }
        }
    }
</script>
```

#### password修改密码

##### html

```html
<template>
    <!-- 页面根视图 -->
    <view>
        <!-- 登录表单所在的视图，使用绝对定位，设置了距离顶部和左侧的位置 -->
        <view class="login-from" style="position: absolute; top: 80rpx;left: 80rpx;">
            <!-- 用于输入原来密码的视图，设置了弹性布局、背景色、宽度、内边距、圆角等样式 -->
            <view style="display: flex; background:Rgba(255, 255, 255, 0.6); width: 600rpx; padding: 20rpx; border-radius: 50rpx; margin-top: 20rpx;">
                <!-- 原来密码输入框组件，双向绑定数据到ord变量，无边框，设置了文字颜色、占位符等样式 -->
                <u-input v-model="ord" :border="false" color="#fff" placeholder="请输入原来的密码" style="padding-left:25rpx;" placeholder-style="color:#333"></u-input>
            </view>
            <!-- 用于输入新密码的视图，样式与输入原来密码的视图类似，只是占位符提示为“请输入新的密码” -->
            <view style="display: flex; background:Rgba(255, 255, 255, 0.6); width: 600rpx; padding: 20rpx; border-radius: 50rpx; margin-top: 20rpx;">
                <u-input v-model="news"   :border="false" color="#fff" placeholder="请输入新的密码" style="padding-left:25rpx;" placeholder-style="color:#333"></u-input>
            </view>
            <!-- 用于确认密码的视图，同样设置了弹性布局、背景相关样式等，不过这里没有双向绑定数据（代码可能不太完整，按现有逻辑分析） -->
            <view style="display: flex; background:Rgba(255, 255, 255, 0.6); width: 600rpx; padding: 20rpx; border-radius: 50rpx; margin-top: 20rpx;">
                <u-input :border="false" color="#fff" placeholder="确认密码" style="padding-left:25rpx;" placeholder-style="color:#333"></u-input>
            </view>
            <!-- 修改密码按钮组件，形状为圆形，类型为主要按钮样式，点击时调用edit方法 -->
            <u-button shape="circle" type="primary" class="u-m-t-30" @click="edit()" >修改密码</u-button>
        </view>
    </view>
</template>
```

##### js

```js
<script>
    export default {
        data() {
            return {
                // 用于存储输入的原来密码数据，初始为空字符串
                ord:'',
                // 用于存储输入的新密码数据，初始为空字符串
                news:''
            };
        },
        onLoad() {
            // 页面加载时的生命周期钩子，此处为空逻辑
        }
        methods:{
            // edit方法，用于向后端发送POST请求来修改密码，修改成功后将新密码存储到数据库中（假设是这样的业务逻辑）
            edit(){
                uni.request({
                    // 请求的后端接口地址，通过this.$url拼接具体的修改密码接口路径
                    url:this.$url+"/info/updatepwd",
                    // 请求方法为POST
                    method:'POST',
                    // 请求头，通过this.$head设置
                    header:this.$head,
                    data:{
                        // 将输入的原来密码数据作为请求参数的oldPassword字段发送给后端
                        oldPassword:this.ord,
                        // 将输入的新密码数据作为请求参数的newPassword字段发送给后端
                        newPassword:this.news
                    },
                    success: (res) => {
                        console.log(res);
                        // 根据后端返回的状态码判断是否修改密码失败，如果状态码是401或500，则显示密码有误的Toast提示
                        if(res.statusCode==401||res.statusCode==500){
                            uni.showToast({
                                title:'密码有误',
                                icon:'error'
                            })
                        }else{
                            // 如果状态码不是表示失败的情况，显示修改成功的Toast提示
                            uni.showToast({
                                title:'修改成功',
                                icon:'success'
                            })
                            // 设置一个延迟，2秒后使用uni.switchTab切换到指定的用户页面
                            setTimeout(()=>{
                                uni.switchTab({
                                    url:'/pages/user/user'
                                })
                            },2000)
                        }
                    }
                })
            }
        }
    }
</script>
```



#### publish发布教程页面

##### html

```html
<template>
    <!-- 页面根视图 -->
    <view>
        <!-- 标题为“上传图片”的u-section组件，设置了距离顶部、左侧的间距以及字体大小，并且右侧不显示额外内容，用于提示上传图片相关功能区域 -->
        <u-section title="上传图片" class="u-m-t-20 u-m-l-20" fontSize="36" :right="false"></u-section>
        <!-- 包含上传组件和上传按钮的视图，设置了外边距 -->
        <view class="u-m-30">
            <!-- u-upload组件用于实现文件上传功能，绑定了多个属性和事件 -->
            <u-upload @on-success="handleSuccess"  action="http://127.0.0.1:3006/api/update/image" name="file" :header="header" ref="uUpload1" :fileList="fileList" @afterRead="afterPic" :auto-upload="false"  multiple :maxCount="10" uploadIcon="plus"></u-upload>
            <!-- 上传按钮，点击时调用OneuploadFile方法 -->
            <u-button @click="OneuploadFile">上传</u-button>
        </view>
        <!-- 包含输入框、选择框及提交按钮等的视图，距离顶部有一定间距 -->
        <view class="u-m-t-20">
            <!-- u-cell-item组件用于展示类似表单条目的内容，此处用于输入类别信息，双向绑定数据到type变量，点击时将show变量设为true以显示相关选择内容，内部展示当前的type值 -->
            <u-cell-item title="类别" v-model="type" @click="show=true" ><view>{{type}}</view></u-cell-item>
            <!-- 包含标题输入相关元素的弹性布局视图，设置了外边距和字体大小 -->
            <view style="display: flex;margin: 20rpx; font-size: 36rpx;">
                <!-- 用于提示“标题”的文本，设置了文本居中以及距离顶部的间隔 -->
                <text style="text-align:center; margin-top: 30rpx;">标题:</text>
                <!-- 标题输入框组件，双向绑定数据到name变量，无边框，设置了距离顶部的间隔、底部边框样式等 -->
                <u-input v-model="name" :border="false"  class="u-m-t-20" placeholder="添加标题" style="border-bottom: 2rpx solid black;" ></u-input>
            </view>
            <!-- 包含正文输入相关元素的弹性布局视图，设置了外边距和字体大小 -->
            <view style="display: flex;margin: 20rpx; font-size: 36rpx;">
                <!-- 用于提示“正文”的文本，设置了文本居中以及距离顶部的间隔 -->
                <text style="text-align:center; margin-top: 30rpx;">正文:</text>
                <!-- 正文输入框组件，双向绑定数据到line变量，设置了距离顶部的间隔以及高度 -->
                <u-input  v-model="line"  class="u-m-t-20" placeholder="请输入正文" style="height: 200rpx;"></u-input>
            </view>
            <!-- u-select选择框组件，双向绑定数据到show变量（此处复用show变量控制显示隐藏不太规范，容易混淆逻辑），设置了选择模式为单列，绑定了可选列表数据list，确认选择时调用confirm方法 -->
            <u-select v-model="show" mode="single-column" :list="list" @confirm="confirm"></u-select>
            <!-- 提交按钮，类型为成功样式，设置了外边距和圆角半径，点击时调用edit方法 -->
            <u-button type="success" class="u-m-50" style="border-radius: 50rpx;" @click="edit()">提交</u-button>
        </view>
    </view>
</template>
```

##### js

```js
<script>
    export default {
        data() {
            return {
                // 可能用于存储图片路径等相关信息，初始为空字符串
                path: '',
                // 控制某些组件显示隐藏（此处既用于选择框显示又用于其他逻辑，不太清晰，易混淆），初始为false表示隐藏
                show:false,
                // 下拉选择框的可选列表数据，每个元素包含label（显示文本）和value（对应的值）属性
                list: [
                    {label:'淡妆新手',value:'1'},
                    {label:'韩系妆容',value:'2'},
                    {label:'日系',value:'3'},
                    {label:'亚裔',value:'4'},
                    {label:'日常',value:'5'},
                    {label:'全妆',value:'6'},
                    {label:'御姐妆容',value:'7'}
                ],
                // 用于存储类别信息，初始为空字符串
                type:'',
                // 用于存储标题信息，初始为空字符串
                name:'',
                // 用于存储正文信息，初始为空字符串
                line:'',
                // 上传文件的接口地址，此处和u-upload组件的action属性重复定义了，可优化，初始赋值为指定地址
                action: 'http://127.0.0.1:3006/update/image',
                // 用于存储已选择的文件列表信息，初始为空数组
                fileList: [],
                // 用于存储已上传成功的图片相关信息（可能是路径等），初始为空数组
                images: [],
                // 请求头信息，包含授权相关内容，通过从本地存储获取的token来设置
                header:{Authorization:'Bearer '+uni.getStorageSync('token')}
            };
        },
        onLoad() {
            // 页面加载时的生命周期钩子，此处为空逻辑
        },
        methods:{
            // 在读取文件（比如选择图片后）触发的方法，用于处理文件相关逻辑
            afterPic(event) {
                // 将读取到的文件信息数组进行浅拷贝，确保后续操作不影响原数据
                let lists = [].concat(event.file)
                lists.forEach(item => {
                    // 将每个文件信息添加到fileList数组中，用于展示已选择的文件等相关操作
                    this.fileList.push({
                      ...item
                    });
                    // 调用上传单个文件的方法，尝试上传每个文件
                    this.OneuploadFile(item); 
                });
            },
            // 上传文件的方法（目前代码里部分上传相关逻辑注释掉了，可能功能未完善）
            OneuploadFile(file) {
                // 通过组件引用调用u-upload组件的上传方法，触发文件上传动作（但目前不清楚此方法内部具体实现是否完整）
                this.$refs.uUpload1.upload();
                
                // 以下是原本的上传文件逻辑，目前被注释掉了，可能后续需要完善补充回来
                // console.log(this.fileList);
                // uni.uploadFile({
                //     url: 'http://127.0.0.1:3006/api/update/image',  // 服务器地址
                //     filePath: file.url,
                //     name: 'file',
                //     header:this.$head,
                //     success: (res) => {
                //         const images = JSON.parse(res.data);
                //         this.images.push(images.data); // 保存每一个成功上传的图片路径
                //         console.log(images);
                //     },
                //     fail: (err) => {
                //         console.error(err); // 记录上传失败的错误
                //     }
                // });
            },
            // 处理文件上传成功后的回调方法，接收服务器返回数据和文件相关信息
            handleSuccess(res, file) {
                // 将上传成功后返回的数据（可能是图片路径等）添加到images数组中，用于后续提交等操作使用
                this.images.push(res.data)
                console.log('上传成功:', res);
                console.log('文件信息:', file);
                // 可以在这里根据业务需求进一步处理返回数据，比如保存图片路径到本地等操作
            },
            // 处理选择框确认选择后的逻辑，接收选择的数据信息
            // 注意返回值为一个数组，单列时取数组的第一个元素即可（因为这里设置的是单列选择模式，只有一个元素）
            confirm(e) {
                console.log(e);
                // 将选择的类别标签赋值给type变量，用于展示和后续提交等操作
                this.type=e[0].label
                // 将选择的类别对应的值赋值给typeid变量（代码里没看到typeid变量的声明，此处可能会报错，需完善）
                this.typeid=e[0].value
            },
            // 提交信息的方法，向服务器发送POST请求提交编辑后的相关内容
            edit(){
                uni.request({
                    // 请求的后端接口地址，通过this.$url拼接/api/publish路径
                    url:this.$url+'/api/publish',
                    // 请求方法为POST
                    method:'POST',
                    // 设置请求头
                    header:this.$head,
                    data:{
                        // 将类别对应的值传递给后端，用于服务器识别分类等操作（前提是typeid变量正确赋值了）
                        typeid:this.typeid,
                        // 将类别标签传递给后端，用于展示等相关操作
                        type:this.type,
                        // 将标题信息传递给后端
                        name:this.name,
                        // 将正文信息传递给后端
                        line:this.line,
                        // 将已上传的图片列表（可能是路径等）传递给后端，若没有则传递空字符串（这里的处理逻辑可根据实际需求优化）
                        image: this.images || '' 
                    },
                    success: (res) => {
                        console.log(res)
                        // 根据后端返回的状态码判断是否出现数据库错误，如果状态码是500则在控制台打印提示信息
                        if(res.statusCode==500){
                            console.log('数据库错误')
                        }else{
                            // 如果没有出现数据库错误等情况，显示发布成功的Toast提示，并设置一个延迟，2秒后重新启动页面跳转到首页
                            uni.showToast({
                                title:'发布成功',
                                icon:'success'
                            })
                            setTimeout(()=>{
                                uni.reLaunch({
                                    url: '/pages/index/index'
                                })
                            },2000)
                        }
                    }
                })
            }
        }
    }
</script>

```

#### reguser注册页面

##### html

```html
<template>
    <!-- 页面根视图 -->
    <view>
        <!-- 绝对定位的视图，用于显示“注册账号”文字，设置了距离顶部和左侧的位置以及字体大小 -->
        <view style="position: absolute;top: 200rpx;left: 60rpx;font-size: 60rpx;">
            <!-- 内部视图，显示“注册账号”文本内容 -->
            <view>注册账号</view>
        </view>
        <!-- 注册表单所在的视图，同样是绝对定位，设置了距离顶部和左侧的位置 -->
        <view class="login-from" style="position: absolute; top: 350rpx;left: 80rpx;">
            <!-- 用于输入账号的视图，设置了弹性布局、背景色、宽度、内边距、圆角等样式 -->
            <view style="display: flex; background:Rgba(255, 255, 255, 0.6); width: 600rpx; padding: 20rpx; border-radius: 50rpx; ">
                <!-- 展示账号相关小图标的image标签，设置了图片路径、展示模式以及宽度和高度 -->
                <image src="../../static/我的 (1).png" mode="aspectFill" style="width: 50rpx;height: 50rpx;"></image>
                <!-- 账号输入框组件，双向绑定数据到username变量，无边框，设置了文字颜色、占位符等样式 -->
                <u-input   v-model="username"  :border="false" color="#fff" placeholder="请输入账号" style="padding-left:25rpx;" placeholder-style="color:#333"></u-input>
            </view>
            <!-- 用于输入密码的视图，样式与账号输入框所在视图类似，设置了弹性布局、背景色等样式，输入框类型为密码 -->
            <view style="display: flex; background:Rgba(255, 255, 255, 0.6); width: 600rpx; padding: 20rpx; border-radius: 50rpx; margin-top: 20rpx;">
                <!-- 展示密码相关小图标的image标签，设置了图片路径、展示模式以及宽度和高度 -->
                <image src="../../static/密码.png" mode="aspectFill" style="width: 65rpx;height: 65rpx;"></image>
                <!-- 密码输入框组件，双向绑定数据到password变量，类型为密码，无边框，设置了文字颜色、占位符等样式 -->
                <u-input type="password" v-model="password" :border="false" color="#fff" placeholder="请输入密码" style="padding-left:25rpx;" placeholder-style="color:#333"></u-input>
            </view>
            <!-- 用于确认密码的视图，样式与密码输入框所在视图类似，同样展示密码相关小图标，输入框类型为密码 -->
            <view style="display: flex; background:Rgba(255, 255, 255, 0.6); width: 600rpx; padding: 20rpx; border-radius: 50rpx; margin-top: 20rpx;">
                <!-- 展示密码相关小图标的image标签，设置了图片路径、展示模式以及宽度和高度 -->
                <image src="../../static/密码.png" mode="aspectFill" style="width: 65rpx;height: 65rpx;"></image>
                <!-- 确认密码输入框组件，无边框，设置了文字颜色、占位符等样式 -->
                <u-input type="password"  :border="false" color="#fff" placeholder="确认密码" style="padding-left:25rpx;" placeholder-style="color:#333"></u-input>
            </view>
            <!-- 注册按钮组件，形状为圆形，类型为主要按钮样式，点击时调用edit方法 -->
            <u-button shape="circle" type="primary" class="u-m-t-30" @click="edit()" >注册</u-button>
            <!-- 用于显示提示文本及登录链接的视图，设置了文本居中以及距离顶部的间隔 -->
            <view style="text-align: center;margin-top: 35rpx;">
                <!-- 灰色的提示文本，显示“拥有账号?” -->
                <text class="text-grey1">拥有账号?</text>
                <!-- 如果已有账号，点击“立即登录”文字调用login方法 -->
                <text style="color: #fff1f6;" @click="login()">立即登录</text>
            </view>
        </view>
    </view>
</template>
```

##### js


```js
<script>
    export default {
        data() {
            return {
                // 用于存储输入的账号数据，初始为空字符串
                username:'',
                // 用于存储输入的密码数据，初始为空字符串
                password:''
            };
        },
        onLoad() {
            // 页面加载时的生命周期钩子，此处为空逻辑
        },
        methods:{
            // 跳转到登录页面的方法，使用uni.navigateTo进行页面跳转，跳转到指定的登录页面路径
            login(){
                uni.navigateTo({
                    url:'/pages/login/login'
                })
            },
            // edit方法，点击注册按钮时触发，用于向后端发送POST请求进行用户注册操作，根据后端返回结果进行相应处理
            edit() {
                uni.request({
                    // 请求的后端接口地址，通过this.$url拼接具体的用户注册接口路径
                    url: this.$url + '/user/reguser',
                    // 请求方法为POST
                    method: 'POST',
                    // 请求头，通过this.$head设置
                    header: this.$head,
                    data: {
                        // 将输入的账号数据作为请求参数的username字段发送给后端
                        username: this.username,
                        // 将输入的密码数据作为请求参数的password字段发送给后端
                        password: this.password
                    },
                    success: (res) => {
                        // 根据后端返回的消息判断注册情况，如果是用户名和密码不能为空的提示，则显示相应错误Toast提示
                        if (res.data.message === '用户名和密码不能为空') {
                            uni.showToast({
                                title: '用户名或密码不能为空',
                                icon: 'error'
                            });
                        } 
                        // 如果后端提示用户名已存在，则显示已有账号的错误Toast提示
                        else if (res.data.message === '用户名已存在') {
                            uni.showToast({
                                title: '已有账号',
                                icon: 'error'
                            });
                        } 
                        // 如果后端返回用户注册成功的消息，则显示注册成功的Toast提示，并设置一个延迟，2秒后导航到登录页面
                        else if (res.data.message === '用户注册成功') {
                            console.log(res);
                            uni.showToast({
                                title: '注册成功',
                                icon: 'success'
                            });
                            setTimeout(() => {
                                uni.navigateTo({
                                    url: '/pages/login/login'
                                });
                            }, 2000);
                        } 
                        // 如果是其他未知的返回消息，则在控制台打印未知错误及返回结果信息
                        else {
                            console.log('未知错误:', res);
                        }
                    }
                });
            }
        }
    }
</script>
```
#### search搜索页面

##### html

```html
<template>
    <!-- 页面根视图 -->
    <view>
        <!-- 使用v-for指令循环遍历list数组，为每个元素创建一个可点击的视图，点击时调用godetail方法并传入当前项，同时设置了一些布局相关的样式类以及内边距 -->
        <view @click="godetail(item)"  v-for="(item,index) in list" class="u-body-item u-flex u-p-t-0" style="padding-left: 50rpx;">
            <!-- 展示图片的image标签，通过拼接字符串的方式设置图片的src属性，指定了图片的展示模式为aspectFit -->
            <image :src="`http://127.0.0.1:3006/list/`+item.images" mode="aspectFit" ></image>
            <!-- 展示文本相关信息的视图，包含多行文本展示 -->
            <view class="u-body-item-title u-line-4">
                <!-- 展示主要文本信息（可能是名称等）的视图，设置了外边距、加粗以及字体大小 -->
                <view style="margin: 20rpx; font-weight: bold;font-size: 36rpx;" >
                    {{item.name}}
                </view>
                <!-- 展示次要文本信息（可能是描述等）的视图，设置了字体大小和文字颜色 -->
                <view style="font-size: 28rpx; color:#afafaf">
                    {{item.line}}
                </view>
                <!-- 展示其他文本信息（可能是类型等）的视图 -->
                <view >{{item.type}}</view>
            </view>
        </view>
    </view>
</template>

```

##### js

```js
<script>
    export default {
        data() {
            return {
                // 用于存储某个值，初始为空字符串，从代码来看具体用途不太明确，可能后续会用于筛选等操作
                value:'',
                // 用于存储列表数据的数组，初始为空数组，会通过请求获取实际数据填充
                list:[],
            };
        },
        onLoad(e) {
            // 将传入的name属性值赋值给value变量，不过这里的e.name的来源不太明确，应该是页面跳转等传入的参数
            this.value=e.name;
            // 调用获取列表数据的方法
            this.getlist();
        },
        methods:{
            // 获取列表数据的方法，向服务器发送GET请求获取相关列表信息
            getlist(value){
                console.log(this.value);
                uni.request({
                    // 请求的后端接口地址，通过this.$url拼接/api/list路径
                    url:this.$url+'/api/list',
                    // 请求方法为GET
                    method:'GET',
                    // 设置请求头
                    header:this.$head,
                    success: (res) => {
                        console.log(res);
                        console.log(this.value);
                        // 对服务器返回的数据进行筛选，筛选出名称（转换为小写后）包含当前value变量值（也转换为小写）的元素，赋值给list数组
                        this.list = res.data.data.filter(item => item.name.toLowerCase().includes(this.value.toLowerCase()));
                    }
                })
            },
            // 跳转到详情页的方法，使用uni.navigateTo进行页面跳转，跳转到指定的详情页路径，并将当前项的id作为参数传递过去
            godetail(item){
                uni.navigateTo({
                    url:`/pages/detail/detail?id=${item.id}`
                })
            }
        }
    }
</script>
```

#### Skincare购物车页面

##### html

```html
<template>
    <!-- 页面根视图 -->
    <view>
        <!-- 用于展示列表内容的视图，设置了外边距 -->
        <view class="list" style="margin: 20rpx;">
            <!-- 复选框组组件，当复选框状态改变时触发onCheckboxChange方法 -->
            <checkbox-group @change="onCheckboxChange">
                <!-- 使用label标签包裹复选框相关内容，这是HTML中用于关联表单元素和文本的一种规范写法 -->
                <label>
                    <!-- 使用v-for指令循环遍历products数组，为每个商品创建一个展示项，以商品的id作为唯一标识 -->
                    <view v-for="(product, index) in products" :key="product.id" class="product-item">
                        <!-- 复选框组件，绑定商品id作为其值，通过判断selected数组中是否包含当前商品id来确定是否默认选中 -->
                        <checkbox :value="String(product.id)" :checked="selected.includes(String(product.id))"></checkbox>
                        <!-- 展示商品图片的image标签，通过拼接字符串的方式设置图片的src属性，指定了图片的展示模式为aspectFill，设置了图片高度和圆角半径 -->
                        <image :src="`http://127.0.0.1:3006/hzlist/` + product.images" mode="aspectFill" style="height: 260rpx; border-radius: 20rpx;"></image>
                        <!-- 展示商品文字相关信息的视图，包含商品名称、类型、价格、种草人数以及删除按钮等 -->
                        <view class="u-body-item-title u-line-2">
                            <!-- 展示商品名称的视图，设置了距离左侧的间距、字体大小以及加粗样式 -->
                            <view class="u-body-item-title u-line-2" style="margin-left: 20rpx; font-size: 36rpx; font-weight: bold;">
                                {{ product.name }}
                            </view>
                            <!-- 展示商品类型的视图，设置了距离左侧、顶部的间距以及字体大小、文字颜色 -->
                            <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 28rpx; color:#afafaf">
                                {{ product.type }}
                            </view>
                            <!-- 包含价格和种草人数展示的弹性布局视图 -->
                            <view style="display: flex;">
                                <!-- 展示商品价格的视图，设置了距离左侧、顶部的间距以及字体大小、文字颜色 -->
                                <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 36rpx; color:red">
                                    {{ product.price }}元
                                </view>
                                <!-- 展示商品种草人数的视图，设置了距离左侧、顶部的间距以及字体大小、文字颜色 -->
                                <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 36rpx; color:red">
                                    {{ product.Plant }}人种草
                                </view>
                            </view>
                            <!-- 删除按钮，点击时调用delshop方法并传入当前商品的id，设置了距离顶部和左侧的间距 -->
                            <u-button @click="delshop(product.id)" style="margin-top: 10rpx; margin-left: 20rpx;">删除</u-button>
                        </view>
                    </view>
                </label>
            </checkbox-group>
            <!-- 包含结算和清空购物车按钮的弹性布局视图，设置了外边距 -->
            <view class="u-m-20" style="display: flex;">
                <!-- 结算按钮，类型为主要按钮，点击时调用calculateTotal方法 -->
                <u-button type="primary" @click="calculateTotal">结算</u-button>
                <!-- 清空购物车按钮，类型为主要按钮，点击时调用clearCart方法 -->
                <u-button type="primary" @click="clearCart">清空购物车</u-button>
            </view>
            <!-- 根据总价是否大于0来决定是否显示总计金额的视图，如果总价大于0则展示总计金额文本 -->
            <view v-if="totalPrice > 0">
                <text>总计：￥{{ totalPrice }}</text>
            </view>
        </view>
    </view>
</template>
```

##### js

```js
<script>
export default {
    data() {
        return {
            // 用于存储购物车中商品信息的数组，初始为空，后续通过请求获取数据填充
            products: [],
            // 用于存储已选中商品的id数组，初始为空，根据复选框的勾选情况动态变化
            selected: [],
            // 用于存储要操作的商品id（代码里此处用途有点模糊，可能是用于统一记录当前操作相关的商品id等情况），初始为空
            shopid: []
        };
    },
    computed: {
        // 计算总价的计算属性，通过遍历已选中商品的id，查找对应的商品价格并累加计算出总价，最后保留两位小数
        totalPrice() {
            return this.selected.reduce((total, id) => {
                const product = this.products.find(p => String(p.id) === id);
                return total + (product? parseFloat(product.price) : 0);
            }, 0).toFixed(2); // 确保两位小数
        }
    },
    onLoad() {
        // 页面加载时调用查询购物车商品信息的方法
        this.getshop();
    },
    methods: {
        // 查询购物车商品信息的方法，向服务器发送GET请求获取购物车中商品列表数据
        getshop() {
            uni.request({
                // 请求的地址，通过this.$url拼接/api/shop路径
                url: this.$url + '/api/shop',
                // 请求方法为GET
                method: 'GET',
                // 设置请求头
                header: this.$head,
                success: (res) => {
                    console.log(res);
                    // 将服务器返回的商品数据赋值给products数组，用于页面展示
                    this.products = res.data.data;
                }
            });
        },
        // 删除购物车中指定商品的方法，向服务器发送请求删除对应商品，并根据返回结果进行相应提示
        delshop(productid) {
            // 将传入的要删除的商品id赋值给shopid变量（此处代码逻辑可以优化，比如可以直接使用productid进行后续操作，不一定需要再赋值给shopid）
            this.shopid = productid;
            uni.request({
                // 请求的地址，通过this.$url拼接/api/delshop/以及要删除的商品id路径
                url: this.$url + '/api/delshop/' + this.shopid,
                // 请求方法为GET（这里使用GET请求删除操作不太符合常规RESTful规范，一般删除用DELETE请求更好，可根据实际后端接口调整）
                method: 'GET',
                // 设置请求头
                header: this.$head,
                success: (res) => {
                    console.log(res);
                    // 从本地存储的商品列表中过滤掉要删除的商品，更新products数组
                    this.products = this.products.filter(product => product.id!== productid);
                    console.log(this.shopid);
                    // 显示删除成功的提示Toast
                    uni.showToast({
                        title: '删除成功',
                        icon: 'success'
                    });
                },
                fail: () => {
                    // 如果请求失败，显示删除失败的提示Toast
                    uni.showToast({
                        title: '删除失败',
                        icon: 'none'
                    });
                }
            });
        },
        // 清空购物车的方法，向服务器发送请求清空购物车，成功后清空本地存储的商品列表和已选中商品的id数组，并显示相应提示
        clearCart() {
            uni.request({
                // 请求的地址，通过this.$url拼接/api/delallshop（这里URL可能不太准确，也许需要带上一些必要参数等，根据实际后端接口调整）以及shopid（此处的拼接可能不太合理，因为目前代码里shopid不一定是正确用于清空购物车的参数，可优化）
                url: this.$url + '/api/delallshop' + this.shopid, 
                // 请求方法为GET（同理，清空操作一般用DELETE请求更合适，按后端接口要求调整）
                method: 'GET', 
                // 设置请求头
                header: this.$head,
                success: (res) => {
                    console.log(res);
                    // 清空本地存储的商品列表
                    this.products = [];
                    // 清空已选中商品的id数组
                    this.selected = [];
                    // 显示购物车已清空的提示Toast
                    uni.showToast({
                        title: '购物车已清空',
                        icon: 'success'
                    });
                },
                fail: () => {
                    // 如果请求失败，显示清空失败的提示Toast
                    uni.showToast({
                        title: '清空失败',
                        icon: 'none'
                    });
                }
            });
        },
        // 当复选框状态改变时触发的方法，获取改变后选中的商品id数组并更新selected变量
        onCheckboxChange(e) {
            console.log(e);
            this.selected = e.detail.value; // 获取选中的商品ID
        },
        // 结算方法，先判断是否有选中商品，如果没有则提示请选择商品进行结算，如果有则将总价和选中商品的id以参数形式传递，导航到订单页面（这里假设后端后续会根据传递的参数进行相应处理）
        calculateTotal() {
            if (this.selected.length === 0) {
                uni.showToast({
                    title: '请选择商品进行结算',
                    icon: 'none'
                });
                return;
            }
            const selectedIds = this.selected.join(',');
            // 这里可以调用后端（目前只是导航到订单页面，可能后续需要和后端交互完成实际的结算流程，可根据业务完善）
            uni.navigateTo({
                url:`/pages/order/order?totalPrice=${this.totalPrice}&selectedIds=${selectedIds}`
            })
        }
    }
}
</script>

```



#### tools化妆品分类页面

##### html

```html
<template>
    <view>
        <!-- 根据tab每一项，渲染出每一个的分类列表 -->
        <u-tabs :list="type" :is-scroll="true" fontSize="36" :current="current" @change="change"></u-tabs>
        <view style="margin:20rpx;" class="u-body-item u-flex u-boder-bottom u-col-between u-p-t-0" v-for="item in typename" :key="item.id">
            <image :src="`http://127.0.0.1:3006/hzlist/` + item.images" mode="aspectFill" style="height: 260rpx; border-radius: 20rpx;"></image>
            <view class="u-body-item-title u-line-2">
                <view class="u-body-item-title u-line-2" style="margin-left: 20rpx; font-size: 36rpx; font-weight: bold;">
                    {{ item.name }}
                </view>
                <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 28rpx; color:#afafaf">
                    {{ item.type }}
                </view>
                <view style="display: flex;">
                    <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 36rpx; color:red">
                        {{ item.price }}元
                    </view>
                    <view class="u-body-item-title u-line-2" style="margin-left: 30rpx; margin-top: 20rpx; font-size: 36rpx; color:red">
                        {{ item.Plant }}人种草
                    </view>
                </view>
                <u-button @click="edit(item.id)" style="margin-top: 10rpx; margin-left: 20rpx;">加入购物车</u-button>
            </view>
        </view>
    </view>
</template>

<script>
export default {
    data() {
        return {
            type: [],
            list: [],
            typename: [],
            current: 0,
            shopid: []
        };
    },
    onLoad() {
        this.gettype();
        this.getlist();
        this.getshop();
    },
    methods: {
		// 获取用户信息
        getuser() {
            uni.request({
                url: this.$url + '/info/userinfo',
                method: 'GET',
                header: this.$head,
                success: (res) => {
                    console.log(res);
                }
            });
        },
		// 切换分类表
        change(index) {
            this.current = index;
            this.typename = this.list.filter((item) => item.type == this.type[index].name);
        },
		// 获取分类信息
        gettype() {
            uni.request({
                url: this.$url + '/api/hzptype',
                method: 'GET',
                header: this.$head,
                success: (res) => {
                    this.type = res.data.data;
                }
            });
        },
		// 获取列表信息
        getlist(type) {
            uni.request({
                url: this.$url + '/api/hzplist',
                method: 'GET',
                header: this.$head,
                data: { type: name },
                success: (res) => {
                    console.log(res);
                    this.list = res.data.data;
                    this.typename = this.list.filter((item) => item.type == '粉底液');
                }
            });
        },
		// 查询购物车
        getshop() {
            uni.request({
                url: this.$url + '/api/shop',
                method: 'GET',
                header: this.$head,
                success: (res) => {
                    console.log(res);
                }
            });
        },
		// 加入购物车
        edit(itemId) {
            uni.request({
                url: this.$url + '/api/shop',
                method: 'POST',
                header: this.$head,
                data: { shop: itemId },
                success: (res) => {
                    console.log(res);
                    uni.showToast({
                        title: '添加成功',
                        icon: 'success'
                    });
                    this.getshop(); //调用查询购物车信息
                },
                fail: (err) => {
                    console.error(err);
                    uni.showToast({
                        title: '添加失败',
                        icon: 'error'
                    });
                }
            });
        }
    }
};
</script>


```

##### js

```js
<script>
export default {
    data() {
        return {
            // 用于存储分类信息的数组，初始为空，后续通过请求获取数据填充，供u-tabs组件展示分类选项
            type: [],
            // 可能用于存储某个列表数据（从代码逻辑看不太明确具体用途，也许是综合的商品列表等情况），初始为空数组
            list: [],
            // 用于存储根据分类筛选后的商品信息数组，初始为空数组，会根据分类切换等操作动态变化并用于页面商品项展示
            typename: [],
            // 用于记录当前选中的分类索引，初始为0，表示默认选中第一个分类
            current: 0,
            // 可能用于存储购物车相关的商品id等信息（代码里此处用途有点模糊，可能是用于统一记录当前操作相关的商品id等情况），初始为空
            shopid: []
        };
    },
    onLoad() {
        // 页面加载时调用获取分类信息的方法
        this.gettype();
        // 调用获取列表信息的方法（这里可能是获取商品列表等相关数据）
        this.getlist();
        // 调用查询购物车商品信息的方法
        this.getshop();
    },
    methods: {
        // 获取用户信息的方法，向服务器发送GET请求获取用户相关信息（目前只是在控制台打印返回结果，可能后续需要根据信息做进一步处理）
        getuser() {
            uni.request({
                // 请求的地址，通过this.$url拼接/info/userinfo路径
                url: this.$url + '/info/userinfo',
                // 请求方法为GET
                method: 'GET',
                // 设置请求头
                header: this.$head,
                success: (res) => {
                    console.log(res);
                }
            });
        },
        // 当u-tabs组件的分类选项切换时触发的方法，更新当前选中的分类索引，并根据选中的分类筛选出对应类型的商品信息更新typename数组
        change(index) {
            // 将传入的新选中的分类索引赋值给current变量，记录当前选中项
            this.current = index;
            // 从list数组中筛选出类型与当前选中分类名称匹配的商品信息，更新typename数组，用于页面展示对应分类下的商品
            this.typename = this.list.filter((item) => item.type == this.type[index].name);
        },
        // 获取分类信息的方法，向服务器发送GET请求获取分类列表数据，并将返回的数据赋值给type数组，供u-tabs组件展示分类选项
        gettype() {
            uni.request({
                // 请求的地址，通过this.$url拼接/api/hzptype路径
                url: this.$url + '/api/hzptype',
                // 请求方法为GET
                method: 'GET',
                // 设置请求头
                header: this.$head,
                success: (res) => {
                    this.type = res.data.data;
                }
            });
        },
        // 获取列表信息的方法（推测是获取商品列表信息），向服务器发送GET请求获取列表数据，可根据传入的类型参数筛选数据，将返回的数据赋值给list数组，并进行了一次默认按“粉底液”类型筛选商品到typename数组（这里的筛选逻辑可能需要根据实际需求调整）
        getlist(type) {
            uni.request({
                // 请求的地址，通过this.$url拼接/api/hzplist路径
                url: this.$url + '/api/hzplist',
                // 请求方法为GET
                method: 'GET',
                // 设置请求头
                header: this.$head,
                data: { type: name }, // 这里的name变量未定义，可能是代码错误，应该传入正确的类型参数，比如this.type等
                success: (res) => {
                    console.log(res);
                    this.list = res.data.data;
                    this.typename = this.list.filter((item) => item.type == '粉底液');
                }
            });
        },
        // 查询购物车商品信息的方法，向服务器发送GET请求获取购物车中商品列表数据（目前只是在控制台打印返回结果，可能后续需要根据数据做进一步处理）
        getshop() {
            uni.request({
                // 请求的地址，通过this.$url拼接/api/shop路径
                url: this.$url + '/api/shop',
                // 请求方法为GET
                method: 'GET',
                // 设置请求头
                header: this.$head,
                success: (res) => {
                    console.log(res);
                }
            });
        },
        // 将商品加入购物车的方法，向服务器发送POST请求，将商品id作为参数传递给后端，根据请求结果显示相应的提示Toast，并重新查询购物车信息更新展示
        edit(itemId) {
            uni.request({
                // 请求的地址，通过this.$url拼接/api/shop路径
                url: this.$url + '/api/shop',
                // 请求方法为POST
                method: 'POST',
                // 设置请求头
                header: this.$head,
                data: { shop: itemId },
                success: (res) => {
                    console.log(res);
                    // 显示添加成功的提示Toast
                    uni.showToast({
                        title: '添加成功',
                        icon: 'success'
                    });
                    // 重新调用查询购物车信息的方法，更新购物车商品展示
                    this.getshop(); 
                },
                fail: (err) => {
                    console.error(err);
                    // 显示添加失败的提示Toast
                    uni.showToast({
                        title: '添加失败',
                        icon: 'error'
                    });
                }
            });
        }
    }
};
</script>
```

#### type分类页面

##### html

```html
<template>
    <!-- 页面根视图 -->
    <view>
        <!-- 内部视图 -->
        <view >
            <!-- 使用v-for指令循环遍历list数组，为每个元素创建一个可点击的视图，点击时调用godetail方法并传入当前项，同时设置了一些布局相关的样式类以及顶部内边距为0 -->
            <view @click="godetail(item)"  v-for="item in list" class="u-body-item u-flex u-p-t-0" >
                <!-- 展示图片的image标签，通过拼接字符串的方式设置图片的src属性，指定了图片的展示模式为aspectFit -->
                <image :src="`http://127.0.0.1:3006/list/`+item.images" mode="aspectFit" ></image>
                <!-- 展示文本相关信息的视图，包含多行文本展示 -->
                <view class="u-body-item-title u-line-4">
                    <!-- 展示主要文本信息（可能是名称等）的视图，设置了外边距、加粗以及字体大小 -->
                    <view style="margin: 20rpx; font-weight: bold;font-size: 36rpx;" >
                        {{item.name}}
                    </view>
                    <!-- 展示次要文本信息（可能是描述等）的视图，设置了字体大小和文字颜色 -->
                    <view style="font-size: 28rpx; color:#afafaf">
                        {{item.line}}
                    </view>
                    <!-- 展示其他文本信息（可能是类型等）的视图 -->
                    <view >{{item.type}}</view>
                </view>
            </view>
        </view>
    </view>
</template>
```

##### js

```js
<script>
    export default {
        data() {
            return {
                // 用于存储列表数据的数组，初始为空数组，后续会通过请求获取数据填充
                list: [],
            };
        },
        onLoad(e) {
            // 将传入的参数e赋值给value变量（此处变量名似乎不太准确，容易混淆，按照常规可直接使用e进行后续操作），不过这里的e的具体结构不太明确，应该是页面跳转等传入的相关数据
            this.value = e;
            // 在控制台打印value的值，方便调试查看传入的数据情况
            console.log(this.value);
            // 调用获取列表数据的方法，并传入value作为参数（同样，这里参数使用有点混乱，需根据实际情况优化）
            this.getlist(this.value);
        },
        methods: {
            // 获取列表数据的方法，向服务器发送GET请求获取相关列表信息，并根据传入的参数进行筛选
            getlist(value) {
                // 在控制台打印传入参数value中typeid属性的值（前提是value有typeid这个属性，从代码整体逻辑看此处不太严谨，需明确value的数据结构）
                console.log(value.typeid);
                uni.request({
                    // 请求的后端接口地址，通过this.$url拼接/api/list路径
                    url: this.$url + '/api/list',
                    // 请求方法为GET
                    method: 'GET',
                    // 设置请求头
                    header: this.$head,
                    success: (res) => {
                        // 对服务器返回的数据进行筛选，筛选出typeid属性与传入参数value的typeid属性相等的元素，赋值给list数组
                        this.list = res.data.data.filter(item => item.typeid == value.typeid);
                        // 在控制台打印筛选后的list数组内容，方便调试查看获取的数据是否符合预期
                        console.log(this.list);
                    }
                });
            },
            // 跳转到详情页的方法，使用uni.navigateTo进行页面跳转，跳转到指定的详情页路径，并将当前项的id作为参数传递过去
            godetail(item) {
                uni.navigateTo({
                    url: `/pages/detail/detail?id=${item.id}`
                });
            }
        }
    }
</script>

```

#### user用户页面

##### html

```html
<template>
    <!-- 定义一个类名为“my”的视图容器，作为整个页面这部分内容的根元素 -->
    <view class="my">
        <!-- 展示一张图片，设置了类名“img”，指定图片的源文件路径，并设置图片的展示模式为“aspectFill” -->
        <image class="img" src="../../static/dasdasdasd.jpg"  mode="aspectFill" ></image>
        <!-- 定义一个类名为“personal”的视图容器，用于包裹个人相关信息展示区域 -->
        <view class="personal">
            <!-- 定义一个类名为“name-profile”的视图容器，用于展示用户名、昵称等个人资料相关内容 -->
            <view class="name-profile">
                <!-- 使用u-avatar组件展示用户头像，设置头像的尺寸为140，头像的src属性通过拼接字符串的方式获取，绑定了类名“head” -->
                <u-avatar :size="140" :src="'http://127.0.0.1:3006/'+list.avatar" class="head"></u-avatar>
                <!-- 定义一个类名为“info”的视图容器，用于展示具体的文字信息 -->
                <view class="info">
                    <!-- 展示用户名的视图，使用了三目运算符，如果list.username有值则显示其值，否则显示“Allen” -->
                    <view class="name">{{list.username ||'Allen'}}</view>
                    <!-- 展示用户昵称的视图，同样使用三目运算符，若list.nickname有值显示其值，否则显示“未设置昵称” -->
                    <view class="profile">{{list.nickname ||'未设置昵称'}}</view>
                    <!-- 展示用户个人简介的视图，也是通过三目运算符处理，若list.profile有值就显示它，不然显示默认文案 -->
                    <view class="profile">{{list.profile  ||'这家伙很懒，什么都没有留下！'}}</view>
                </view>
            </view>
            <!-- 定义一个类名为“from”的视图容器，用于展示一些功能选项，如修改信息、我的收藏等 -->
            <view class="from">
                <!-- 使用u-cell-group组件对下面的多个u-cell-item进行分组 -->
                <u-cell-group>
                    <!-- u-cell-item组件用于展示一个可点击的功能项，这里展示“修改信息”选项，点击时调用info方法 -->
                    <u-cell-item title="修改信息" @click="info" ></u-cell-item>
                    <!-- 展示“我的收藏”选项，点击时调用cell方法 -->
                    <u-cell-item title="我的收藏" @click="cell"></u-cell-item>
                    <!-- 展示“我的喜欢”选项，点击时调用history方法 -->
                    <u-cell-item title="我的喜欢" @click="history"></u-cell-item>
                    <!-- 展示“修改密码”选项，点击时调用password方法 -->
                    <u-cell-item title="修改密码" @click="password" ></u-cell-item>
                    <!-- 展示“意见反馈”选项（此处未绑定点击事件，可能后续需要补充对应功能） -->
                    <u-cell-item title="意见反馈" ></u-cell-item>
                </u-cell-group>
            </view>
            <!-- 退出登录按钮，设置了外边距、类型为主要按钮、形状为圆形，点击时调用edit方法 -->
            <u-button class="u-m-50" type="primary" shape="circle" @click="edit()">退出登录</u-button>
        </view>
    </view>
</template>
```

##### js

```html
<script>
    export default {
        data() {
            return {
                // 定义一个名为“list”的空数组，用于后续存储获取到的用户相关信息
                list:[]
            }
        },
        onLoad() {
            // 页面加载时调用获取用户信息的方法
            this.getuser();
        },
        methods: {
            // 发送GET请求到后端（连接MySQL数据库，这里假设后端会与数据库交互查询）获取用户信息的方法
            getuser(){
                console.log(this.$head);
                uni.request({
                    // 请求的后端接口地址，通过this.$url拼接/info/userinfo路径
                    url:this.$url+'/info/userinfo',
                    // 请求方法为GET
                    method:'GET',
                    // 设置请求头
                    header:this.$head,
                    success: (res) => {
                        console.log(res);
                        // 将后端返回的用户信息（从res.data.user获取，这里假设后端返回数据结构是这样的）赋值给list数组
                        this.list=res.data.user;
                        console.log(this.list);
                    }
                });
            },
            // 跳转到“修改信息”页面的方法，使用uni.navigateTo进行页面跳转，跳转到指定的“userinfo”页面路径
            info(){
                uni.navigateTo({
                    url:'/pages/userinfo/userinfo'
                });
            },
            // 跳转到“我的收藏”页面的方法，使用uni.navigateTo进行页面跳转，跳转到指定的“cell”页面路径
            cell(){
                uni.navigateTo({
                    url:'/pages/cell/cell'
                });
            },
            // 跳转到“我的喜欢”页面的方法，使用uni.navigateTo进行页面跳转，跳转到指定的“hos”页面路径
            history(){
                uni.navigateTo({
                    url:'/pages/hos/hos'
                });
            },
            // 跳转到“修改密码”页面的方法，使用uni.navigateTo进行页面跳转，跳转到指定的“password”页面路径
            password(){
                uni.navigateTo({
                    url:'/pages/password/password'
                });
            },
            // 退出登录的方法，使用uni.reLaunch重新启动页面，跳转到指定的“login”登录页面路径
            edit(){
                uni.reLaunch({
                    url:'/pages/login/login'
                });
            }
        }
    }
</script>
```

##### css

```html
<style lang="scss">
    // 为类名为“img”的元素设置样式，使其宽度占满父容器
   .img {
        width: 100%;
    }
    // 为类名为“personal”的元素设置样式
   .personal {
        // 设置高度
        height: 810rpx;
        // 设置背景为线性渐变，从上到下由透明度为0.8的白色渐变为透明度为0.7的白色
        background: linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.7));
        /* 渐变透明白色背景 */
        // 设置外边距
        margin: 20rpx;
        // 设置边框圆角，只设置了上边框的左右角以及右上角、右下角为圆角，左上角、左下角为直角
        border-radius: 20rpx 20rpx 0 0;
        // 设置顶部外边距为负值，使其向上偏移一定距离
        margin-top: -100rpx;
        // 设置相对定位，方便内部元素基于它进行定位调整
        position: relative;
        // 设置阴影效果，水平、垂直偏移量以及模糊半径和颜色
        box-shadow: 0 10rpx 20rpx rgba(0, 0, 0, 0.1);
        // 设置z-index，确保该元素在页面层级中高于其他元素，显示在前面
        z-index: 10;
        /* 确保高于其他元素 */
      .name-profile {
            // 设置内边距
            padding: 35rpx;
            // 设置为弹性布局，方便内部元素排列
            display: flex;
            // 设置垂直方向上的对齐方式为顶部对齐
            align-items: flex-start;
            // 设置相对定位，方便内部元素基于它进行定位调整
            position: relative;
          .head {
                // 设置顶部外边距为负值，使其向上偏移一定距离，确保头像左边界紧贴容器左边
                margin-top: -10rpx;
                // 设置边框圆角为圆形
                border-radius: 50%;
                // 设置宽度
                width: 150rpx;
                // 设置高度
                height: 150rpx;
            }
          .info {
                // 设置为纵向的弹性布局，即子元素按列排列
                display: flex;
                flex-direction: column;
                // 设置在主轴方向（纵向）上的对齐方式为居中对齐
                justify-content: center;
                // 设置左边距
                margin-left: 50rpx;
            }
          .name {
                // 设置字体大小
                font-size: 35rpx;
                // 设置顶部外边距
                margin-top: 10rpx;
                // 设置底部外边距
                margin-bottom: 10rpx;
                // 设置文字颜色
                color: #0c34ba;
                // 设置字体粗细程度
                font-weight: 600;
            }
          .profile {
                // 设置顶部外边距
                margin-top: 10rpx;
                // 设置文字颜色
                color: #646566;
                // 设置字体大小
                font-size: 24rpx;
                // 设置字体粗细程度
                font-weight: 400;
            }
        }
       .from {
            // 设置文字颜色
            color: #646566;
            // 设置顶部外边距
            margin-top: 80rpx;
            // 设置字体大小
            font-size: 40rpx;
        }
    }
</style>
```

#### userinfo修改用户信息页面

##### html

```html
<template>
    <!-- 定义一个类名为“my”的视图容器，作为整个页面这部分内容的根元素 -->
    <view class="my">
        <!-- 展示一张图片，设置了类名“img”，指定图片的源文件路径，并设置图片的展示模式为“aspectFill” -->
        <image class="img" src="../../static/asdcasdcasd.jpg"  mode="aspectFill" ></image>
        <!-- 定义一个类名为“personal”的视图容器，用于包裹个人相关信息展示区域 -->
        <view class="personal">
            <!-- 定义一个类名为“name-profile”的视图容器，用于展示用户名、头像等个人资料相关内容 -->
            <view class="name-profile">
                <!-- 使用u-avatar组件展示用户头像，设置头像的尺寸为140，头像的src属性通过拼接字符串的方式获取，绑定了类名“head”，点击头像时调用avatar方法 -->
                <u-avatar @click="avatar" :size="140" :src="'http://127.0.0.1:3006/'+data.avatar" class="head"></u-avatar>
                <!-- 定义一个类名为“info”的视图容器，用于展示具体的文字信息 -->
                <view class="info">
                    <!-- 展示用户名的视图，使用了三目运算符，如果data.username有值则显示其值，否则显示“Allen” -->
                    <view class="name">{{data.username ||'Allen'}}</view>
                    <!-- 展示用户简介的视图，同样使用三目运算符，若data.profile有值显示其值，否则显示“这家伙很懒，什么都没有留下！” -->
                    <view class="profile">{{data.profile ||'这家伙很懒，什么都没有留下！'}}</view>
                </view>
            </view>
            <!-- 定义一个类名为“from”的视图容器，用于展示一些可编辑的个人信息项，如昵称、性别等 -->
            <view class="from">
                <!-- 使用u-cell-group组件对下面的多个u-cell-item进行分组 -->
                <u-cell-group>
                    <!-- u-cell-item组件用于展示一个可点击且双向绑定数据的功能项，这里展示“昵称”选项，点击时调用nickname方法，双向绑定数据到nick变量，内部展示data.nickname的值 -->
                    <u-cell-item title="昵称"  @click="nickname" v-model="nick"  ><view>{{data.nickname}}</view></u-cell-item>
                    <!-- 展示“性别”选项，点击时调用sex1方法，双向绑定数据到sex变量，内部展示data.sex的值 -->
                    <u-cell-item title="性别"  @click="sex1"  v-model="sex" ><view>{{data.sex}}</view></u-cell-item>
                    <!-- 展示“手机号码”选项，点击时调用phonenum方法，双向绑定数据到phone变量，内部展示data.phone的值 -->
                    <u-cell-item title="手机号码"  @click="phonenum"  v-model="phone"  ><view>{{data.phone}}</view></u-cell-item>
                    <!-- 展示“简介”选项，点击时调用prof方法，双向绑定数据到profile变量，内部展示data.profile的值 -->
                    <u-cell-item title="简介"  @click="prof"  v-model="profile"  ><view>{{data.profile}}</view></u-cell-item>
                </u-cell-group>
            </view>
            <!-- 修改信息按钮，设置了外边距、类型为主要按钮、形状为圆形，点击时调用edit方法 -->
            <u-button class="u-m-50" type="primary" shape="circle" @click="edit()">修改信息</u-button>
        </view>
    </view>
</template>
```

##### js

```html
<script>
    export default {
        data() {
            return {
                // 定义一个图片路径变量，初始赋值为指定的默认图片链接，可能用于头像等图片相关操作（此处和实际使用的头像逻辑有点混淆，可优化）
                pic:'https://uviewui.com/common/logo.png',
                // 用于存储昵称信息，初始为空字符串，和u-cell-item中双向绑定相关联，用于数据更新和传递
                nick:'',
                // 用于存储性别信息，初始为空字符串，同样和对应u-cell-item双向绑定，用于数据交互
                sex:'',
                // 用于存储手机号码信息，初始为空字符串，和相关u-cell-item双向绑定，用于数据操作
                phone:'',
                // 用于存储用户简介信息，初始为空字符串，与对应u-cell-item双向绑定，用于数据处理
                profile:'',
                // 用于存储用户相关信息的数组（从代码逻辑看更像是一个对象，此处命名和使用有点不太准确，易混淆），初始为空，后续通过请求获取数据填充
                data:[]
            }
        },
        onLoad() {
            // 页面加载时调用获取用户信息的方法
            this.getuser();
        },
        methods: {
            // 头像相关操作方法，点击头像时触发，用于选择图片并上传新头像到服务器
            avatar(){
                // 调用uni.chooseImage方法，弹出选择图片的界面，允许用户选择1张图片
                uni.chooseImage({
                    count: 1, 
                    success: (res) => {
                        // 选择图片成功后，调用uni.uploadFile方法将选中的图片上传到服务器指定接口
                        uni.uploadFile({
                            // 上传文件的后端接口地址，通过this.$url拼接/info/update/avatar路径
                            url: this.$url+'/info/update/avatar', 
                            // 请求方法为POST
                            method: 'POST', 
                            // 设置请求头
                            header: this.$head, 
                            // 设置要上传的文件路径，取选择图片返回的临时文件路径中的第一个（因为只允许选1张）
                            filePath: res.tempFilePaths[0], 
                            // 设置上传文件时的文件名称参数
                            name: 'file', 
                            success: (res) => {
                                console.log(res); 
                                // 解析服务器返回的数据，将其中关于头像相关的数据赋值给data.avatar，更新头像信息（这里假设服务器返回的数据结构符合解析逻辑）
                                this.data.avatar = JSON.parse(res.data).data;
                                console.log(this.data.avatar);
                            }
                        });
                    }
                });
            },
            // 获取用户信息的方法，向服务器发送GET请求获取用户相关信息
            getuser(){
                uni.request({
                    // 请求的后端接口地址，通过this.$url拼接/info/userinfo路径
                    url:this.$url+'/info/userinfo',
                    // 请求方法为GET
                    method:'GET',
                    // 设置请求头
                    header:this.$head,
                    // 设置请求携带的数据，将当前各个相关信息变量的值作为参数传递（这里有点问题，因为目前这些变量初始为空，可能获取不到期望的数据，可优化逻辑）
                    data:{
                        avatar:this.data.avatar,
                        nickName:this.nickname,
                        phone:this.phone,
                        sex:this.sex,
                        profile:this.profile
                    },
                    success: (res) => {
                        console.log(res);
                        // 将服务器返回的用户信息（从res.data.user获取，假设后端返回数据结构是这样的）赋值给data变量，用于页面展示和后续操作
                        this.data=res.data.user;
                    }
                })
            },
            // 昵称修改相关操作方法，点击“昵称”选项时触发，弹出可编辑的模态框供用户修改昵称
            nickname(){
                uni.showModal({
                    title:"昵称",
                    // 设置模态框中显示的初始内容为nick.nickName（这里逻辑有点混乱，应该是this.nick更合理，因为前面双向绑定到了nick变量）
                    content:this.nick.nickName,
                    // 设置模态框内容可编辑
                    editable:true,
                    success: (res) => {
                        console.log(res);
                        // 如果用户点击确认按钮
                        if(res.confirm){
                            // 将用户在模态框中输入的内容赋值给nick变量，更新昵称信息
                            this.nick=res.content;
                            // 重新调用获取用户信息的方法，可能是为了更新页面展示以及将新昵称信息传递给后端（此处逻辑可优化，比如可以单独设置更新昵称的接口请求等）
                            this.getuser();
                        }
                    }
                })
            },
            // 性别修改相关操作方法，点击“性别”选项时触发，弹出可编辑的模态框供用户修改性别信息
            sex1(){
                uni.showModal({
                    title:"性别",
                    // 设置模态框中显示的初始内容为sex.sex（同样逻辑有点混乱，应该是this.sex更合理）
                    content:this.sex.sex,
                    // 设置模态框内容可编辑
                    editable:true,
                    success: (res) => {
                        console.log(res);
                        // 如果用户点击确认按钮
                        if(res.confirm){
                            // 将用户在模态框中输入的内容赋值给sex变量，更新性别信息
                            this.sex=res.content;
                            // 重新调用获取用户信息的方法，可能是为了更新页面展示以及将新性别信息传递给后端（逻辑可优化同上面昵称修改处）
                            this.getuser();
                        }
                    }
                })
            },
            // 手机号码修改相关操作方法，点击“手机号码”选项时触发，弹出可编辑的模态框供用户修改手机号码信息
            phonenum(){
                uni.showModal({
                    title:"手机号码",
                    // 设置模态框中显示的初始内容为phone.phone（逻辑较混乱，应为this.phone）
                    content:this.phone.phone,
                    // 设置模态框内容可编辑
                    editable:true,
                    success: (res) => {
                        console.log(res);
                        // 如果用户点击确认按钮
                        if(res.confirm){
                            // 将用户在模态框中输入的内容赋值给phone变量，更新手机号码信息
                            this.phone=res.content;
                            // 重新调用获取用户信息的方法，可能是为了更新页面展示以及将新手机号码信息传递给后端（逻辑可优化）
                            this.getuser();
                            // 以下这段代码存在语法错误，多了一个success函数声明，应该是想在更新phone变量后做些操作，但写法有误，可根据实际需求调整此处逻辑
                            success: (res) => {
                                this.phone = this.phone;
                                console.log(this.phone);
                            }
                        }
                    }
                })
            },
            // 用户简介修改相关操作方法，点击“简介”选项时触发，弹出可编辑的模态框供用户修改简介内容
            prof(){
                uni.showModal({
                    title:"简介",
                    // 设置模态框中显示的初始内容为profile.profile（逻辑混乱，应为this.profile）
                    content:this.profile.profile,
                    // 设置模态框内容可编辑
                    editable:true,
                    success: (res) => {
                        console.log(res);
                        // 如果用户点击确认按钮
                        if(res.confirm){
                            // 将用户在模态框中输入的内容赋值给profile变量，更新用户简介信息
                            this.profile=res.content;
                            console.log(this.profile);
                        }
                    }
                })
            },
            // 修改信息的提交方法，向服务器发送POST请求，将修改后的各项用户信息传递给后端进行更新
            edit(){
                uni.request({
                    // 请求的后端接口地址，通过this.$url拼接/info/userinfo路径
                    url:this.$url+'/info/userinfo',
                    // 请求方法为POST
                    method:'POST',
                    // 设置请求头
                    header:this.$head,
                    // 设置请求携带的数据，将当前各个相关信息变量的值作为参数传递给后端，用于更新用户信息
                    data:{
                        avatar:this.data.avatar,
                        nickname:this.nick,
                        phone:this.phone,
                        sex:this.sex,
                        profile:this.profile
                    },
                    success: (res) => {
                        console.log(this.user_prc,this.nick,this.sex,this.phone,this.profile);
                        console.log(res);
                        // 判断手机号码是否为空，如果为空则弹出提示框提醒手机号不能为空
                        if(this.phone==''){
                            alert('手机号输入不能为空');
                        }else{
                            // 如果手机号码不为空，显示修改成功的提示Toast
                            uni.showToast({
                                title:'修改成功',
                                icon:'success'
                            });
                            // 设置一个延迟，2秒后重新启动页面，跳转到个人中心页面（可能是为了刷新页面展示最新信息）
                            setTimeout(()=>{
                                // 跳转到个人中心页面并刷新
                                uni.reLaunch({
                                    url:'/pages/user/user'
                                });
                            },2000);
                        }
                    }
                })
            }
        }
    }
</script>
```

##### css

```html
<style lang="scss">
    // 为类名为“img”的元素设置样式，使其宽度占满父容器
  .img {
        width: 100%;
    }
    // 为类名为“personal”的元素设置样式
  .personal {
        // 设置高度
        height: 630rpx;
        // 设置背景为线性渐变，从上到下由透明度为0.8的白色渐变为透明度为0.7的白色
        background: linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.7));
        /* 渐变透明白色背景 */
        // 设置外边距
        margin: 20rpx;
        // 设置边框圆角，只设置了上边框的左右角以及右上角、右下角为圆角，左上角、左下角为直角
        border-radius: 20rpx 20rpx 0 0;
        // 设置顶部外边距为负值，使其向上偏移一定距离
        margin-top: -100rpx;
        // 设置相对定位，方便内部元素基于它进行定位调整
        position: relative;
        // 设置阴影效果，水平、垂直偏移量以及模糊半径和颜色
        box-shadow: 0 10rpx 20rpx rgba(0, 0, 0, 0.1);
        // 设置z-index，确保该元素在页面层级中高于其他元素，显示在前面
        z-index: 10;
        /* 确保高于其他元素 */
     .name-profile {
            // 设置内边距
            padding: 35rpx;
            // 设置为弹性布局，方便内部元素排列
            display: flex;
            // 设置垂直方向上的对齐方式为顶部对齐
            align-items: flex-start;
            // 设置相对定位，方便内部元素基于它进行定位调整
            position: relative;
         .head {
                // 设置顶部外边距为负值，使其向上偏移一定距离，确保头像左边界紧贴容器左边
                margin-top: -10rpx;
                // 设置边框圆角为圆形
                border-radius: 50%;
                // 设置宽度
                width: 150rpx;
                // 设置高度
                height: 150rpx;
            }
         .info {
                // 设置为纵向的弹性布局，即子元素按列排列
                display: flex;
                flex-direction: column;
                // 设置在主轴方向（纵向）上的对齐方式为居中对齐
                justify-content: center;
                // 设置左边距
                margin-left: 50rpx;
            }
         .name {
                // 设置字体大小
                font-size: 35rpx;
                // 设置顶部外边距
                margin-top: 10rpx;
                // 设置底部外边距
                margin-bottom: 10rpx;
                // 设置文字颜色
                color: #0c34ba;
                // 设置字体粗细程度
                font-weight: 600;
            }
         .profile {
                // 设置顶部外边距
                margin-top: 10rpx;
                // 设置文字颜色
                color: #646566;
                // 设置字体大小
                font-size: 24rpx;
                // 设置字体粗细程度
                font-weight: 400;
            }
        }
      .from {
            // 设置文字颜色
            color: #646566;
            // 设置顶部外边距
            margin-top: 20rpx;
            // 设置字体大小
            font-size: 40rpx;
        }
    }
</style>
```
